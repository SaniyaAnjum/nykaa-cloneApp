/*! For license information please see 7056.e17497c603.chunk.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7056],{26099:(t,e,n)=>{n.d(e,{Z:()=>I});var r,i,o=n(70655),s=n(44589),u=n(30909),a=n(14594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.LL("app","Firebase",c),f="@firebase/app",l="[DEFAULT]",p=((i={})[f]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new a.Yd("@firebase/app"),v=function(){function t(t,e,n){var r,i,a=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new u.H0(e.name),this._addComponent(new u.wA("app",(function(){return a}),"PUBLIC"));try{for(var c=(0,o.XA)(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next()){var f=h.value;this._addComponent(f)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=l),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=l),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=l);var u=o.name;if("string"!=typeof u||!u)throw h.create("bad-app-name",{appName:String(u)});if((0,s.r3)(e,u))throw h.create("duplicate-app",{appName:u});var a=new t(n,o,r);return e[u]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(a.join(" "))}c(new u.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:a.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});(0,a.Am)(t,e)},apps:null,SDK_VERSION:"8.0.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||l,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function c(u){var a,c,f=u.name;if(n.has(f))return d.debug("There were multiple attempts to register component "+f+"."),"PUBLIC"===u.type?r[f]:null;if(n.set(f,u),"PUBLIC"===u.type){var l=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[f])throw h.create("invalid-app-argument",{appName:f});return t[f]()};void 0!==u.serviceProps&&(0,s.ZB)(l,u.serviceProps),r[f]=l,t.prototype[f]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,f).apply(this,u.multipleInstances?t:[])}}try{for(var p=(0,o.XA)(Object.keys(e)),v=p.next();!v.done;v=p.next()){var y=v.value;e[y]._addComponent(u)}}catch(t){a={error:t}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}return"PUBLIC"===u.type?r[f]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=y;!function(t,e){t.INTERNAL.registerComponent(new u.wA("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(f,"0.6.12",void 0),t.registerVersion("fire-js","")}(w);const I=w},30909:(t,e,n)=>{n.d(e,{H0:()=>a,wA:()=>o});var r=n(70655),i=n(44589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",u=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:s,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var u=this.getOrInitializeService(o);if(!u){if(i)return null;throw Error("Service "+this.name+" is not available")}return u}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var u=(0,r.CR)(o.value,2),a=u[0],c=u[1],h=this.normalizeInstanceIdentifier(a);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fl)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new u(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},14594:(t,e,n)=>{function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}var i;n.d(e,{Am:()=>p,Ub:()=>l,Yd:()=>f,in:()=>o});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var u={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},a=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},f=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?u[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function l(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=u[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var u=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:u,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},44589:(t,e,n)=>{n.d(e,{BH:()=>s,LL:()=>g,Mn:()=>v,UG:()=>c,ZB:()=>o,b$:()=>l,d:()=>p,jU:()=>h,ne:()=>w,p$:()=>i,r3:()=>b,ru:()=>f,uI:()=>a,w1:()=>d,z$:()=>u});var r=n(70655);function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function a(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function c(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function h(){return"object"==typeof self&&self.self===self}function f(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function l(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return u().indexOf("Electron/")>=0}function d(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return u().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(m,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").";return new y(i,u,r)},t}(),m=/\{\$([^}]+)}/g;function b(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){var n=new I(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,u=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^a&(c^h),s=1518500249):(o=a^c^h,s=1859775393):r<60?(o=a&c|h&(a|c),s=2400959708):(o=a^c^h,s=3395469782),i=(u<<5|u>>>27)+o+f+s+n[r]&4294967295,f=h,h=c,c=4294967295&(a<<30|a>>>2),a=u,u=i;this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function E(){}},15503:(t,e,n)=>{n.d(e,{Z:()=>r.Z});var r=n(26099);r.Z.registerVersion("firebase","8.0.0","app")},29603:(t,e,n)=>{var r=n(70655),i=n(26099),o=n(14594),s=n(44589),u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},f=f||{},l=h||self;function p(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function T(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(){this.j=this.j,this.i=this.i}A.prototype.j=!1,A.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++m)}(this)},A.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var N=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function D(t){return Array.prototype.concat.apply([],arguments)}function O(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var x,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function L(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var C=l.navigator;if(C){var V=C.userAgent;if(V){x=V;break t}}x=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function G(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=p;var q,B,z=L(x,"Opera"),J=L(x,"Trident")||L(x,"MSIE"),H=L(x,"Edge"),K=H||J,W=L(x,"Gecko")&&!(L(x.toLowerCase(),"webkit")&&!L(x,"Edge"))&&!(L(x,"Trident")||L(x,"MSIE"))&&!L(x,"Edge"),X=L(x.toLowerCase(),"webkit")&&!L(x,"Edge");function Y(){var t=l.document;return t?t.documentMode:void 0}t:{var Z="",Q=(B=x,W?/rv:([^\);]+)(\)|;)/.exec(B):H?/Edge\/([\d\.]+)/.exec(B):J?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):X?/WebKit\/(\S+)/.exec(B):z?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(Q&&(Z=Q?Q[1]:""),J){var $=Y();if(null!=$&&$>parseFloat(Z)){q=String($);break t}}q=Z}var tt,et={};function nt(t){return function(t,e){var n=et;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=P(String(q)).split("."),r=P(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=R(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||R(0==s[2].length,0==u[2].length)||R(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}l.document&&J?tt=Y()||parseInt(q,10)||void 0:tt=void 0;var rt=tt,it=!J||9<=Number(rt),ot=J&&!nt("9"),st=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",p,e),l.removeEventListener("test",p,e)}catch(t){}return t}();function ut(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ut.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{F(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ut.prototype.b=function(){this.defaultPrevented=!0},T(at,ut);var ct={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ot)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ht="closure_listenable_"+(1e6*Math.random()|0),ft=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ft,this.Y=this.Z=!1}function pt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dt(t){this.src=t,this.a={},this.b=0}function vt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=N(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(pt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function yt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=yt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),mt={};function bt(t,e,n,r,i){if(r&&r.once)return It(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ht]?t.va(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!1,r,i)}function wt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i;if(s&&!it)return null;var u=St(t);if(u||(t[gt]=u=new dt(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Nt,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)st||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Tt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function It(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)It(t,e[o],n,r,i);return null}return n=Ot(n),t&&t[ht]?t.wa(e,n,y(r)?!!r.capture:!!r,i):wt(t,e,n,!0,r,i)}function Et(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Et(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=Ot(n),t&&t[ht]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=yt(o=t.a[e],n,r,i))&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=St(t))&&(e=t.a[e.toString()],t=-1,e&&(t=yt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ht])vt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Tt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(vt(n,t),0==n.b&&(n.src=null,e[gt]=null)):pt(t)}}}function Tt(t){return t in mt?mt[t]:mt[t]="on"+t}function At(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&_t(t),n.call(r,e)}function Nt(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return At(t,e=new at(e,this))}return At(t,new at(e,this))}function St(t){return(t=t[gt])instanceof dt?t:null}var Dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(t){return"function"==d(t)?t:(t[Dt]||(t[Dt]=function(e){return t.handleEvent(e)}),t[Dt])}function kt(){A.call(this),this.c=new dt(this),this.J=this,this.C=null}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&vt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}T(kt,A),kt.prototype[ht]=!0,(c=kt.prototype).addEventListener=function(t,e,n,r){bt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Et(this,t,e,n,r)},c.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new ut(t,n);else if(t instanceof ut)t.target=t.target||n;else{var i=t;j(t=new ut(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=xt(s,r,!0,t)&&i}if(i=xt(s=t.a=n,r,!0,t)&&i,i=xt(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=xt(s=t.a=e[o],r,!1,t)&&i;return i},c.G=function(){if(kt.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)pt(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Pt=l.JSON.stringify;function Lt(){this.b=this.a=null}var Rt,Ct=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Mt}),(function(t){t.reset()}),100);function Vt(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Mt(){this.next=this.b=this.a=null}function Gt(t){l.setTimeout((function(){throw t}),0)}function Ut(t,e){Rt||function(){var t=l.Promise.resolve(void 0);Rt=function(){t.then(qt)}}(),jt||(Rt(),jt=!0),Ft.add(t,e)}Lt.prototype.add=function(t,e){var n=Ct.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Mt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Mt.prototype.reset=function(){this.next=this.b=this.a=null};var jt=!1,Ft=new Lt;function qt(){for(var t;t=Vt();){try{t.a.call(t.b)}catch(t){Gt(t)}var e=Ct;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}jt=!1}function Bt(t,e){kt.call(this),this.b=t||1,this.a=e||l,this.f=I(this.Ya,this),this.g=_()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Jt(t,e,n){if("function"==d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Ht(t){t.a=Jt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}T(Bt,kt),(c=Bt.prototype).aa=!1,c.M=null,c.Ya=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},c.G=function(){Bt.S.G.call(this),zt(this),delete this.a};var Kt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(A);function Wt(t){A.call(this),this.b=t,this.a={}}T(Wt,A);var Xt=[];function Yt(t,e,n,r){Array.isArray(n)||(n&&(Xt[0]=n.toString()),n=Xt);for(var i=0;i<n.length;i++){var o=bt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Zt(t){M(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Qt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.S.G.call(this),Zt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qt.prototype.info=function(){};var te=null;function ee(){return te=te||new kt}function ne(t){ut.call(this,"serverreachability",t)}function re(t){var e=ee();e.dispatchEvent(new ne(e,t))}function ie(t){ut.call(this,"statevent",t)}function oe(t){var e=ee();e.dispatchEvent(new ie(e,t))}function se(t){ut.call(this,"timingevent",t)}function ue(t,e){if("function"!=d(t))throw Error("Fn must not be null and must be a function");return l.setTimeout((function(){t()}),e)}T(ne,ut),T(ie,ut),T(se,ut);var ae={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ce={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function he(){}function fe(t){var e;return(e=t.a)||(e=t.a={}),e}function le(){}he.prototype.a=null;var pe,de={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ve(){ut.call(this,"d")}function ye(){ut.call(this,"c")}function ge(){}function me(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Wt(this),this.P=be,t=K?125:void 0,this.R=new Bt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}T(ve,ut),T(ye,ut),T(ge,he),pe=new ge;var be=45e3,we={},Ie={};function Ee(t,e,n){t.H=1,t.i=ze(Ge(e)),t.j=n,t.I=!0,_e(t,null)}function _e(t,e){t.u=_(),Ne(t),t.l=Ge(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=Qn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Kt(I(t.Ca,t,t.a),t.O)),Yt(t.J,t.a,"readystatechange",t.Wa),e=t.B?G(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function Te(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ae(t,n);if(i==Ie){4==e&&(t.h=4,oe(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),xe(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zn(e),e.F=!0)):($t(t.c,t.f,n,"[Invalid Chunked Response]"),ke(t),Oe(t))}function Ae(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ie:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?Ie:(e=e.substr(r,n),t.D=r+n,e))}function Ne(t){t.U=_()+t.P,Se(t,t.P)}function Se(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ue(I(t.Ua,t),e)}function De(t){t.o&&(l.clearTimeout(t.o),t.o=null)}function Oe(t){0==t.g.v||t.A||Kn(t.g,t)}function ke(t){De(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),Zt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function xe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||fn(n.b,t)))if(n.I=t.N,!t.C&&fn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Hn(n),Cn(n)}Bn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ue(I(n.Ra,n),6e3));if(1>=hn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Xn(n,11)}else if((t.C||n.a==t)&&Hn(n),!k(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(L(h,"spdy")||L(h,"quic")||L(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ln(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Be(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Zn(a,a.C?a.ga:null,a.fa),p.C){pn(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(De(d),Ne(d)),a.a=p}else qn(a);0<n.g.length&&Gn(n)}else"stop"!=i[0]&&"close"!=i[0]||Xn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Xn(n,7):Rn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function Pe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(v(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Le(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Le)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Re(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ce(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ce(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ce(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=me.prototype).setTimeout=function(t){this.P=t},c.Wa=function(t){t=t.target;var e=this.F;e&&3==kn(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=kn(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!K&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),De(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,oe(12),ke(this),Oe(this);break t}$t(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,xe(this,a)}this.I?(Te(this,e,o),K&&this.b&&3==e&&(Yt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,o,null),xe(this,o)),4==e&&ke(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Ne(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),ke(this),Oe(this)}}}catch(t){}},c.Va=function(){if(this.a){var t=kn(this.a),e=this.a.$();this.D<e.length&&(De(this),Te(this,t,e),this.b&&4!=t&&Ne(this))}},c.cancel=function(){this.A=!0,ke(this)},c.Ua=function(){this.o=null;var t=_();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),ke(this),this.h=2,Oe(this)):Se(this,this.U-t)},(c=Le.prototype).K=function(){Re(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Re(this),this.a.concat()},c.get=function(t,e){return Ce(this.b,t)?this.b[t]:e},c.set=function(t,e){Ce(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Me){this.a=void 0!==e?e:t.a,Ue(this,t.f),this.j=t.j,je(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new Le(e.a),n.b=e.b),qe(this,n),this.i=t.i}else t&&(n=String(t).match(Ve))?(this.a=!!e,Ue(this,n[1]||"",!0),this.j=Je(n[2]||""),je(this,n[3]||"",!0),Fe(this,n[4]),this.g=Je(n[5]||"",!0),qe(this,n[6]||"",!0),this.i=Je(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function Ge(t){return new Me(t)}function Ue(t,e,n){t.f=n?Je(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function je(t,e,n){t.c=n?Je(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function qe(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=He(e,Ze)),t.b=new $e(e,t.a))}function Be(t,e,n){t.b.set(e,n)}function ze(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Me.prototype.toString=function(){var t=[],e=this.f;e&&t.push(He(e,We,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(He(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?Ye:Xe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",He(n,Qe)),t.join("")};var We=/[#\/\?@]/g,Xe=/[#\?:]/g,Ye=/[#\?]/g,Ze=/[#\?@]/g,Qe=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Le,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Ce(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ce((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Re(t)))}function nn(t,e){return tn(t),e=on(t,e),Ce(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),O(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sn(t,e){this.b=t,this.a=e}function un(t){this.g=t||an,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.ia&&l.ia.ya&&l.ia.ya()&&l.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(c=$e.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=D(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=D(e,t[n])}return e},c.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var an=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hn(t){return t.b?1:t.a?t.a.size:0}function fn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ln(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=a(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return O(t.c)}function vn(){}function yn(){this.a=new vn}function gn(t,e,n){var r=n||"";try{Pe(t,(function(t,n){var i=t;y(t)&&(i=Pt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function mn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}un.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=a(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return l.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return l.JSON.parse(t,void 0)};var bn=l.JSON.parse;function wn(t){kt.call(this),this.headers=new Le,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=In,this.D=this.F=!1}T(wn,kt);var In="",En=/^https?$/i,_n=["POST","PUT"];function Tn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Dn(t)}function Nn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Sn(t){if(t.b&&void 0!==f&&(!t.s[1]||4!=kn(t)||2!=t.X()))if(t.l&&4==kn(t))Jt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==kn(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ve)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!En.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<kn(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.X()+"]",Nn(t)}}finally{Dn(t)}}}function Dn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?p:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(l.clearTimeout(t.m),t.m=null)}function kn(t){return t.a?t.a.readyState:0}function xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Be(t,e,n))}function Pn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ln(t){this.pa=0,this.g=[],this.c=new Qt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Pn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Pn("baseRetryDelayMs",5e3,t),this.Ma=Pn("retryDelaySeedMs",1e4,t),this.Ja=Pn("forwardChannelMaxRetries",2,t),this.ma=Pn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new un(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Rn(t){if(Vn(t),3==t.v){var e=t.R++,n=Ge(t.B);Be(n,"SID",t.J),Be(n,"RID",e),Be(n,"TYPE","terminate"),jn(t,n),(e=new me(t,t.c,e,void 0)).H=2,e.i=ze(Ge(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(e.i.toString(),"")),!n&&l.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qn(e.g,null),e.a.ba(e.i)),e.u=_(),Ne(e)}Yn(t)}function Cn(t){t.a&&(zn(t),t.a.cancel(),t.a=null)}function Vn(t){Cn(t),t.j&&(l.clearTimeout(t.j),t.j=null),Hn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&l.clearTimeout(t.h),t.h=null)}function Mn(t,e){t.g.push(new sn(t.La++,e)),3==t.v&&Gn(t)}function Gn(t){cn(t.b)||t.h||(t.h=!0,Ut(t.Ba,t),t.u=0)}function Un(t,e){var n;n=e?e.f:t.R++;var r=Ge(t.B);Be(r,"SID",t.J),Be(r,"RID",n),Be(r,"AID",t.P),jn(t,r),t.i&&t.l&&xn(r,t.i,t.l),n=new me(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ln(t.b,n),Ee(n,r,e)}function jn(t,e){t.f&&Pe({},(function(t,n){Be(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?I(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{gn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function qn(t){t.a||t.j||(t.U=1,Ut(t.Aa,t),t.o=0)}function Bn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ue(I(t.Aa,t),Wn(t,t.o)),t.o++,0))}function zn(t){null!=t.s&&(l.clearTimeout(t.s),t.s=null)}function Jn(t){t.a=new me(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ge(t.la);Be(e,"RID","rpc"),Be(e,"SID",t.J),Be(e,"CI",t.H?"0":"1"),Be(e,"AID",t.P),jn(t,e),Be(e,"TYPE","xmlhttp"),t.i&&t.l&&xn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ze(Ge(e)),n.j=null,n.I=!0,_e(n,t)}function Hn(t){null!=t.m&&(l.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Hn(t),zn(t),t.a=null;var r=2}else{if(!fn(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_()-e.u;var i=t.u;(r=ee()).dispatchEvent(new se(r,n,e,i)),Gn(t)}else qn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ue(I(t.Ba,t,e),Wn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Bn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Xn(t,5);break;case 4:Xn(t,10);break;case 3:Xn(t,6);break;default:Xn(t,2)}}function Wn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Xn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=I(t.Xa,t);n||(n=new Me("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||Ue(n,"https"),ze(n)),function(t,e){var n=new Qt;if(l.Image){var r=new Image;r.onload=E(mn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(mn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(mn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(mn,n,r,"TestLoadImage: timeout",!1,e),l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Yn(t),Vn(t)}function Yn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,O(t.g),t.g.length=0),t.f.qa())}function Zn(t,e,n){var r=function(t){return t instanceof Me?Ge(t):new Me(t,void 0)}(n);if(""!=r.c)e&&je(r,e+"."+r.c),Fe(r,r.h);else{var i=l.location;r=function(t,e,n,r){var i=new Me(null,void 0);return t&&Ue(i,t),e&&je(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&M(t.W,(function(t,e){Be(r,e,t)})),e=t.A,n=t.na,e&&n&&Be(r,e,n),Be(r,"VER",t.ha),jn(t,r),r}function Qn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Ka)).F=t.C,e}function $n(){}function tr(){if(J&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function er(t,e){kt.call(this),this.a=new Ln(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ye.call(this),this.status=1}function ir(t){this.a=t}(c=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fe(this.H):fe(pe),this.a.onreadystatechange=I(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void An(this,t)}t=n||"";var i=new Le(this.headers);r&&Pe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Tn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=l.FormData&&t instanceof l.FormData,!(0<=N(_n,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return J&&nt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=I(this.xa,this)):this.m=Jt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){An(this,t)}},c.xa=function(){void 0!==f&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),wn.S.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Sn(this):this.Ta())},c.Ta=function(){Sn(this)},c.X=function(){try{return 2<kn(this)?this.a.status:-1}catch(t){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},c.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=Ln.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new me(this,this.c,t,void 0),r=this.l;if(this.O&&(r?j(r=G(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),Be(i=Ge(this.B),"RID",t),Be(i,"CVER",22),this.A&&Be(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&xn(i,this.i,r),ln(this.b,n),this.Ga&&Be(i,"TYPE","init"),this.da?(Be(i,"$req",e),Be(i,"SID","null"),n.V=!0,Ee(n,i,null)):Ee(n,i,e),this.v=2}}else 3==this.v&&(t?Un(this,t):0==this.g.length||cn(this.b)||Un(this))},c.Aa=function(){if(this.j=null,Jn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ue(I(this.Sa,this),t)}},c.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Cn(this),Jn(this))},c.Ra=function(){null!=this.m&&(this.m=null,Cn(this),Bn(this),oe(19))},c.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(c=$n.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ha=function(){},tr.prototype.a=function(t,e){return new er(t,e)},T(er,kt),(c=er.prototype).addEventListener=function(t,e,n,r){er.S.addEventListener.call(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){er.S.removeEventListener.call(this,t,e,n,r)},c.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;oe(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Zn(t,null,t.fa),Gn(t)},c.close=function(){Rn(this.a)},c.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Mn(this.a,e)}else this.g?((e={}).__data__=Pt(t),Mn(this.a,e)):Mn(this.a,t)},c.G=function(){this.a.f=null,delete this.f,Rn(this.a),delete this.a,er.S.G.call(this)},T(nr,ve),T(rr,ye),T(ir,$n),ir.prototype.ta=function(){this.a.dispatchEvent("a")},ir.prototype.sa=function(t){this.a.dispatchEvent(new nr(t))},ir.prototype.ra=function(t){this.a.dispatchEvent(new rr(t))},ir.prototype.qa=function(){this.a.dispatchEvent("b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.Pa,er.prototype.open=er.prototype.Oa,er.prototype.close=er.prototype.close,ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,ce.COMPLETE="complete",le.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",kt.prototype.listen=kt.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.X,wn.prototype.getResponseJson=wn.prototype.Na,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=ae,sr=ce,ur=le,ar=wn,cr=n(30909),hr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,r.ZT)(e,t),e}(Error),lr=new o.Yd("@firebase/firestore");function pr(){return lr.logLevel}function dr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.DEBUG){var i=e.map(gr);lr.debug.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.ERROR){var i=e.map(gr);lr.error.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(lr.logLevel<=o.in.WARN){var i=e.map(gr);lr.warn.apply(lr,(0,r.pr)(["Firestore (8.0.0): "+t],i))}}function gr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function mr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.0) INTERNAL ASSERTION FAILED: "+t;throw vr(e),new Error(e)}function br(t,e){t||mr()}function wr(t,e){return t}function Ir(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Er=function(){function t(){}return t.t=function(){for(var t=62*Math.floor(256/62),e="";e.length<20;)for(var n=Ir(40),r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62));return e},t}();function _r(t,e){return t<e?-1:t>e?1:0}function Tr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ar(t){return t+"\0"}var Nr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.h=function(t){return _r(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Nr.u=new Nr("");var Sr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Nr.fromBase64String(e))}catch(e){throw new fr(hr.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Nr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}();function Dr(){if("undefined"==typeof Uint8Array)throw new fr(hr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Or(){if("undefined"==typeof atob)throw new fr(hr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.fromBase64String=function(t){Or();try{return new e(Nr.fromBase64String(t))}catch(t){throw new fr(hr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Dr(),new e(Nr.fromUint8Array(t))},e.prototype.toBase64=function(){return Or(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Dr(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Sr),xr=function(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o},Pr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return _r(this.projectId,t.projectId)||_r(this.database,t.database)},t}();function Lr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Vr=function(){function t(t,e){this.m=t,this.A=e,this.R={}}return t.prototype.get=function(t){var e=this.m(t),n=this.R[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.A(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Rr(this.R,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.P=function(){return Cr(this.R)},t}(),Mr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fr(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fr(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fr(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fr(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.g=function(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Gr=function(){function t(t){this.timestamp=t}return t.V=function(e){return new t(e)},t.min=function(){return new t(new Mr(0,0))},t.prototype.h=function(t){return this.timestamp.g(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.v=function(){return this.timestamp},t}(),Ur=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&mr(),void 0===n?n=t.length-e:n>t.length-e&&mr(),this.segments=t,this.offset=e,this.S=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.D(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.C(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},t.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},t.prototype.k=function(){return this.segments[this.offset]},t.prototype.O=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.P=function(){return 0===this.length},t.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},t.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.prototype.B=function(){return this.L().join("/")},e.prototype.toString=function(){return this.B()},e.q=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.U=function(){return new e([])},e}(Ur),Fr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.C=function(t,n,r){return new e(t,n,r)},e.K=function(t){return Fr.test(t)},e.prototype.B=function(){return this.L().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.K(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.B()},e.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},e.j=function(){return new e(["__name__"])},e.G=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new fr(hr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new fr(hr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new fr(hr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.U=function(){return new e([])},e}(Ur),Br=function(){function t(t){this.path=t}return t.H=function(e){return new t(jr.q(e))},t.J=function(e){return new t(jr.q(e).N(5))},t.prototype.Y=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===jr.D(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.D=function(t,e){return jr.D(t.path,e.path)},t.X=function(t){return t.length%2==0},t.Z=function(e){return new t(new jr(e.slice()))},t}();function zr(t){return null==t}function Jr(t){return 0===t&&1/t==-1/0}function Hr(t){return"number"==typeof t&&Number.isInteger(t)&&!Jr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Kr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Wr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Kr(t,e,n,r,i,o,s)}function Xr(t){var e=wr(t);if(null===e.tt){var n=e.path.B();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.B()+t.op.toString()+ji(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.B()+e.dir;var e})).join(","),zr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Js(e.startAt)),e.endAt&&(n+="|ub:",n+=Js(e.endAt)),e.tt=n}return e.tt}function Yr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ys(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Vi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ks(t.startAt,e.startAt)&&Ks(t.endAt,e.endAt)}function Zr(t){return Br.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qr,$r,ti=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Gr.min()),void 0===o&&(o=Gr.min()),void 0===s&&(s=Nr.u),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),ei=function(t){this.count=t};function ni(t){switch(t){case hr.OK:return mr();case hr.CANCELLED:case hr.UNKNOWN:case hr.DEADLINE_EXCEEDED:case hr.RESOURCE_EXHAUSTED:case hr.INTERNAL:case hr.UNAVAILABLE:case hr.UNAUTHENTICATED:return!1;case hr.INVALID_ARGUMENT:case hr.NOT_FOUND:case hr.ALREADY_EXISTS:case hr.PERMISSION_DENIED:case hr.FAILED_PRECONDITION:case hr.ABORTED:case hr.OUT_OF_RANGE:case hr.UNIMPLEMENTED:case hr.DATA_LOSS:return!0;default:return mr()}}function ri(t){if(void 0===t)return vr("GRPC error has no .code"),hr.UNKNOWN;switch(t){case Qr.OK:return hr.OK;case Qr.CANCELLED:return hr.CANCELLED;case Qr.UNKNOWN:return hr.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return hr.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return hr.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return hr.INTERNAL;case Qr.UNAVAILABLE:return hr.UNAVAILABLE;case Qr.UNAUTHENTICATED:return hr.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return hr.INVALID_ARGUMENT;case Qr.NOT_FOUND:return hr.NOT_FOUND;case Qr.ALREADY_EXISTS:return hr.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return hr.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return hr.FAILED_PRECONDITION;case Qr.ABORTED:return hr.ABORTED;case Qr.OUT_OF_RANGE:return hr.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return hr.UNIMPLEMENTED;case Qr.DATA_LOSS:return hr.DATA_LOSS;default:return mr()}}($r=Qr||(Qr={}))[$r.OK=0]="OK",$r[$r.CANCELLED=1]="CANCELLED",$r[$r.UNKNOWN=2]="UNKNOWN",$r[$r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$r[$r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$r[$r.NOT_FOUND=5]="NOT_FOUND",$r[$r.ALREADY_EXISTS=6]="ALREADY_EXISTS",$r[$r.PERMISSION_DENIED=7]="PERMISSION_DENIED",$r[$r.UNAUTHENTICATED=16]="UNAUTHENTICATED",$r[$r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$r[$r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$r[$r.ABORTED=10]="ABORTED",$r[$r.OUT_OF_RANGE=11]="OUT_OF_RANGE",$r[$r.UNIMPLEMENTED=12]="UNIMPLEMENTED",$r[$r.INTERNAL=13]="INTERNAL",$r[$r.UNAVAILABLE=14]="UNAVAILABLE",$r[$r.DATA_LOSS=15]="DATA_LOSS";var ii=function(){function t(t,e){this.D=t,this.root=e||si.EMPTY}return t.prototype.ot=function(e,n){return new t(this.D,this.root.ot(e,n,this.D).copy(null,null,si.at,null,null))},t.prototype.remove=function(e){return new t(this.D,this.root.remove(e,this.D).copy(null,null,si.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.P=function(){return this.root.P()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ht=function(){return this.root.ht()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new oi(this.root,null,this.D,!1)},t.prototype.ft=function(t){return new oi(this.root,t,this.D,!1)},t.prototype.dt=function(){return new oi(this.root,null,this.D,!0)},t.prototype.wt=function(t){return new oi(this.root,t,this.D,!0)},t}(),oi=function(){function t(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}return t.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},t.prototype.At=function(){return this.Tt.length>0},t.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),si=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.P=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.P()?this:this.left.min()},t.prototype.ht=function(){return this.min().key},t.prototype.ct=function(){return this.right.P()?this.key:this.right.ct()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},t.prototype.gt=function(){if(this.left.P())return t.EMPTY;var e=this;return e.left.Vt()||e.left.left.Vt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.gt(),null)).Pt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.P()||i.left.Vt()||i.left.left.Vt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Vt()&&(i=i.bt()),i.right.P()||i.right.Vt()||i.right.left.Vt()||(i=i.vt()),0===n(e,i.key)){if(i.right.P())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.gt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Pt()},t.prototype.Vt=function(){return this.color},t.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.St()),t.left.Vt()&&t.left.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.right.Vt()&&(t=t.Dt()),t},t.prototype.yt=function(){var t=this.Dt();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.Vt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.Vt()&&this.left.Vt())throw mr();if(this.right.Vt())throw mr();var t=this.left.Nt();if(t!==this.right.Nt())throw mr();return t+(this.Vt()?0:1)},t}();si.EMPTY=null,si.RED=!0,si.at=!1,si.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw mr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw mr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new si(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.P=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ht=function(){return null},t.prototype.ct=function(){return null},t.prototype.Vt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var ui=function(){function t(t){this.D=t,this.data=new ii(this.D)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ht()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.D(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.kt=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new ai(this.data._t())},t.prototype.ft=function(t){return new ai(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.P=function(){return this.data.P()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.D(i,o))return!1}return!0},t.prototype.L=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.D);return n.data=e,n},t}(),ai=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),ci=new ii(Br.D);function hi(){return ci}function fi(){return hi()}var li=new ii(Br.D);function pi(){return li}var di=new ii(Br.D),vi=new ui(Br.D);function yi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=vi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gi=new ui(_r);function mi(){return gi}var bi=function(){function t(t){this.D=t?function(e,n){return t(e,n)||Br.D(e.key,n.key)}:function(t,e){return Br.D(t.key,e.key)},this.$t=pi(),this.Lt=new ii(this.D)}return t.Bt=function(e){return new t(e.D)},t.prototype.has=function(t){return null!=this.$t.get(t)},t.prototype.get=function(t){return this.$t.get(t)},t.prototype.first=function(){return this.Lt.ht()},t.prototype.last=function(){return this.Lt.ct()},t.prototype.P=function(){return this.Lt.P()},t.prototype.indexOf=function(t){var e=this.$t.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.D=this.D,r.$t=e,r.Lt=n,r},t}(),wi=function(){function t(){this.qt=new ii(Br.D)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):mr():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ut((function(e,n){t.push(n)})),t},t}(),Ii=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=u}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,bi.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&ks(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ei=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Jt=r,this.Yt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,_i.Zt(e,n)),new t(Gr.min(),r,mi(),hi(),yi())},t}(),_i=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(Nr.u,n,yi(),yi(),yi())},t}(),Ti=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Ai=function(t,e){this.targetId=t,this.oe=e},Ni=function(t,e,n,r){void 0===n&&(n=Nr.u),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Si=function(){function t(){this.ae=0,this.he=ki(),this.ce=Nr.u,this.ue=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.o()>0&&(this.le=!0,this.ce=t)},t.prototype.we=function(){var t=yi(),e=yi(),n=yi();return this.he.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:mr()}})),new _i(this.ce,this.ue,t,e,n)},t.prototype.Ee=function(){this.le=!1,this.he=ki()},t.prototype.Te=function(t,e){this.le=!0,this.he=this.he.ot(t,e)},t.prototype.Ie=function(t){this.le=!0,this.he=this.he.remove(t)},t.prototype.me=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.ue=!0},t}(),Di=function(){function t(t){this.Pe=t,this.ge=new Map,this.Ve=hi(),this.ye=Oi(),this.pe=new ui(_r)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof ds?this.ve(r,t.re):t.re instanceof vs&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.xe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.Ee(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.xe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.xe(n)&&(e.Fe(n),r.de(t.resumeToken));break;default:mr()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ge.forEach((function(t,r){n.xe(r)&&e(r)}))},t.prototype.ke=function(t){var e=t.targetId,n=t.oe.count,r=this.Oe(e);if(r){var i=r.target;if(Zr(i))if(0===n){var o=new Br(i.path);this.Se(e,o,new vs(o,Gr.min()))}else br(1===n);else this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e))}},t.prototype.$e=function(t){var e=this,n=new Map;this.ge.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.te&&Zr(o.target)){var s=new Br(o.target.path);null!==e.Ve.get(s)||e.Le(i,s)||e.Se(i,s,new vs(s,t))}r.fe&&(n.set(i,r.we()),r.Ee())}}));var r=yi();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.Oe(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ei(t,n,this.pe,this.Ve,r);return this.Ve=hi(),this.ye=Oi(),this.pe=new ui(_r),i},t.prototype.ve=function(t,e){if(this.xe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.Ve=this.Ve.ot(e.key,e),this.ye=this.ye.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.xe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ie(e),this.ye=this.ye.ot(e,this.Be(e).delete(t)),n&&(this.Ve=this.Ve.ot(e,n))}},t.prototype.removeTarget=function(t){this.ge.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},t.prototype.me=function(t){this.Ne(t).me()},t.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new Si,this.ge.set(t,e)),e},t.prototype.Be=function(t){var e=this.ye.get(t);return e||(e=new ui(_r),this.ye=this.ye.ot(t,e)),e},t.prototype.xe=function(t){var e=null!==this.Oe(t);return e||dr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},t.prototype.Fe=function(t){var e=this;this.ge.set(t,new Si),this.Pe.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},t}();function Oi(){return new ii(Br.D)}function ki(){return new ii(Br.D)}function xi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pi(t){var e=t.mapValue.fields.__previous_value__;return xi(e)?Pi(e):e}function Li(t){var e=qi(t.mapValue.fields.__local_write_time__.timestampValue);return new Mr(e.seconds,e.nanos)}var Ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xi(t)?4:10:mr()}function Vi(t,e){var n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Li(t).isEqual(Li(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=qi(t.timestampValue),r=qi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zi(t.bytesValue).isEqual(zi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bi(t.geoPointValue.latitude)===Bi(e.geoPointValue.latitude)&&Bi(t.geoPointValue.longitude)===Bi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bi(t.integerValue)===Bi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bi(t.doubleValue),r=Bi(e.doubleValue);return n===r?Jr(n)===Jr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Tr(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Lr(n)!==Lr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vi(n[i],r[i])))return!1;return!0}(t,e);default:return mr()}}function Mi(t,e){return void 0!==(t.values||[]).find((function(t){return Vi(t,e)}))}function Gi(t,e){var n=Ci(t),r=Ci(e);if(n!==r)return _r(n,r);switch(n){case 0:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bi(t.integerValue||t.doubleValue),r=Bi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ui(t.timestampValue,e.timestampValue);case 4:return Ui(Li(t),Li(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zi(t),r=zi(e);return n.h(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_r(n[i],r[i]);if(0!==o)return o}return _r(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_r(Bi(t.latitude),Bi(e.latitude));return 0!==n?n:_r(Bi(t.longitude),Bi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Gi(n[i],r[i]);if(o)return o}return _r(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=_r(r[s],o[s]);if(0!==u)return u;var a=Gi(n[r[s]],i[o[s]]);if(0!==a)return a}return _r(r.length,o.length)}(t.mapValue,e.mapValue);default:throw mr()}}function Ui(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);var n=qi(t),r=qi(e),i=_r(n.seconds,r.seconds);return 0!==i?i:_r(n.nanos,r.nanos)}function ji(t){return Fi(t)}function Fi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=qi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Br.J(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Fi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Fi(t.fields[o])}return e+"}"}(t.mapValue):mr();var e,n}function qi(t){if(br(!!t),"string"==typeof t){var e=0,n=Ri.exec(t);if(br(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bi(t.seconds),nanos:Bi(t.nanos)}}function Bi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zi(t){return"string"==typeof t?Nr.fromBase64String(t):Nr.fromUint8Array(t)}function Ji(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Hi(t){return!!t&&"integerValue"in t}function Ki(t){return!!t&&"arrayValue"in t}function Wi(t){return!!t&&"nullValue"in t}function Xi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yi(t){return!!t&&"mapValue"in t}var Zi={asc:"ASCENDING",desc:"DESCENDING"},Qi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$i=function(t,e){this._=t,this.Ke=e};function to(t){return{integerValue:""+t}}function eo(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jr(e)?"-0":e}}function no(t,e){return Hr(e)?to(e):eo(t,e)}function ro(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function io(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function oo(t,e){return ro(t,e.v())}function so(t){return br(!!t),Gr.V(function(t){var e=qi(t);return new Mr(e.seconds,e.nanos)}(t))}function uo(t,e){return function(t){return new jr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).B()}function ao(t){var e=jr.q(t);return br(Po(e)),e}function co(t,e){return uo(t._,e.path)}function ho(t,e){var n=ao(e);return br(n.get(1)===t._.projectId),br(!n.get(3)&&!t._.database||n.get(3)===t._.database),new Br(vo(n))}function fo(t,e){return uo(t._,e)}function lo(t){var e=ao(t);return 4===e.length?jr.U():vo(e)}function po(t){return new jr(["projects",t._.projectId,"databases",t._.database]).B()}function vo(t){return br(t.length>4&&"documents"===t.get(4)),t.N(5)}function yo(t,e,n){return{name:co(t,e),fields:n.proto.mapValue.fields}}function go(t,e){var n;if(e instanceof ns)n={update:yo(t,e.key,e.value)};else if(e instanceof as)n={delete:co(t,e.key)};else if(e instanceof rs)n={update:yo(t,e.key,e.data),updateMask:xo(e.Qe)};else if(e instanceof os)n={transform:{document:co(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Mo)return{fieldPath:e.field.B(),setToServerValue:"REQUEST_TIME"};if(n instanceof Go)return{fieldPath:e.field.B(),appendMissingElements:{values:n.elements}};if(n instanceof jo)return{fieldPath:e.field.B(),removeAllFromArray:{values:n.elements}};if(n instanceof qo)return{fieldPath:e.field.B(),increment:n.We};throw mr()}(0,t)}))}};else{if(!(e instanceof cs))return mr();n={verify:co(t,e.key)}}return e.Ge.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:oo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:mr()}(t,e.Ge)),n}function mo(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Wo.updateTime(so(t.updateTime)):void 0!==t.exists?Wo.exists(t.exists):Wo.ze()}(e.currentDocument):Wo.ze();if(e.update){e.update.name;var r=ho(t,e.update.name),i=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Jo(e.map((function(t){return qr.G(t)})))}(e.updateMask);return new rs(r,i,o,n)}return new ns(r,i,n)}if(e.delete){var s=ho(t,e.delete);return new as(s,n)}if(e.transform){var u=ho(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)br("REQUEST_TIME"===e.setToServerValue),n=new Mo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Go(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new jo(i)}else"increment"in e?n=new qo(t,e.increment):mr();var o=qr.G(e.fieldPath);return new Ho(o,n)}(t,e)}));return br(!0===n.exists),new os(u,a)}if(e.verify){var c=ho(t,e.verify);return new cs(c,n)}return mr()}function bo(t,e){return{documents:[fo(t,e.path)]}}function wo(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fo(t,r.F()),n.structuredQuery.from=[{collectionId:r.O()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Xi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(Wi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Xi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(Wi(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:No(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:So(t.field),direction:Ao(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ke||zr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=_o(e.startAt)),e.endAt&&(n.structuredQuery.endAt=_o(e.endAt)),n}function Io(t){var e=lo(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){br(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Eo(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new Ws(Do(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return zr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=To(n.startAt));var h=null;return n.endAt&&(h=To(n.endAt)),Ns(ms(e,i,u,s,a,"F",c,h))}function Eo(t){return t?void 0!==t.unaryFilter?[ko(t)]:void 0!==t.fieldFilter?[Oo(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Eo(t)})).reduce((function(t,e){return t.concat(e)})):mr():[]}function _o(t){return{before:t.before,values:t.position}}function To(t){var e=!!t.before,n=t.values||[];return new zs(n,e)}function Ao(t){return Zi[t]}function No(t){return Qi[t]}function So(t){return{fieldPath:t.B()}}function Do(t){return qr.G(t.fieldPath)}function Oo(t){return Cs.create(Do(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mr()}}(t.fieldFilter.op),t.fieldFilter.value)}function ko(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Do(t.unaryFilter.field);return Cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Do(t.unaryFilter.field);return Cs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Do(t.unaryFilter.field);return Cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Do(t.unaryFilter.field);return Cs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mr()}}function xo(t){var e=[];return t.fields.forEach((function(t){return e.push(t.B())})),{fieldPaths:e}}function Po(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Lo=function(){this.He=void 0};function Ro(t,e,n){return t instanceof Mo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Go?Uo(t,e):t instanceof jo?Fo(t,e):function(t,e){var n=Vo(t,e),r=Bo(n)+Bo(t.We);return Hi(n)&&Hi(t.We)?to(r):eo(t.serializer,r)}(t,e)}function Co(t,e,n){return t instanceof Go?Uo(t,e):t instanceof jo?Fo(t,e):n}function Vo(t,e){return t instanceof qo?Hi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e}(Lo),Go=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Lo);function Uo(t,e){for(var n=zo(e),r=function(t){n.some((function(e){return Vi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var jo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,r.ZT)(e,t),e}(Lo);function Fo(t,e){for(var n=zo(e),r=function(t){n=n.filter((function(e){return!Vi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return(0,r.ZT)(e,t),e}(Lo);function Bo(t){return Bi(t.integerValue||t.doubleValue)}function zo(t){return Ki(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Jo=function(){function t(t){this.fields=t,t.sort(qr.D)}return t.prototype.Je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},t.prototype.isEqual=function(t){return Tr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ho=function(t,e){this.field=t,this.transform=e},Ko=function(t,e){this.version=t,this.transformResults=e},Wo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Xo(t,e){return void 0!==t.updateTime?e instanceof ds&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ds}var Yo=function(){};function Zo(t,e,n){return t instanceof ns?function(t,e,n){return new ds(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof rs?function(t,e,n){if(!Xo(t.Ge,e))return new ys(t.key,n.version);var r=is(t,e);return new ds(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof os?function(t,e,n){if(br(null!=n.transformResults),!Xo(t.Ge,e))return new ys(t.key,n.version);var r=ss(0,e),i=function(t,e,n){var r=[];br(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof ds&&(u=e.field(o.field)),r.push(Co(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=us(t,r.data(),i);return new ds(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new vs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Qo(t,e,n,r){return t instanceof ns?function(t,e){if(!Xo(t.Ge,e))return e;var n=es(e);return new ds(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof rs?function(t,e){if(!Xo(t.Ge,e))return e;var n=es(e),r=is(t,e);return new ds(t.key,n,r,{Ye:!0})}(t,e):t instanceof os?function(t,e,n,r){if(!Xo(t.Ge,e))return e;var i=ss(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof ds&&(c=n.field(u.field)),null===c&&r instanceof ds&&(c=r.field(u.field)),i.push(Ro(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=us(t,i.data(),o);return new ds(t.key,i.version,s,{Ye:!0})}(t,e,r,n):function(t,e){return Xo(t.Ge,e)?new vs(t.key,Gr.min()):e}(t,e)}function $o(t,e){return t instanceof os?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof ds?e.field(o.field):void 0,u=Vo(o.transform,s||null);null!=u&&(n=null==n?(new fs).set(o.field,u):n.set(o.field,u))}return n?n.Xe():null}(t,e):null}function ts(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Tr(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Go&&e instanceof Go||t instanceof jo&&e instanceof jo?Tr(t.elements,e.elements,Vi):t instanceof qo&&e instanceof qo?Vi(t.We,e.We):t instanceof Mo&&e instanceof Mo}(t.transform,e.transform)}(t,e)})))}function es(t){return t instanceof ds?t.version:Gr.min()}var ns=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return(0,r.ZT)(e,t),e}(Yo),rs=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ge=i,o.type=1,o}return(0,r.ZT)(e,t),e}(Yo);function is(t,e){return function(t,e){var n=new fs(e);return t.Qe.fields.forEach((function(e){if(!e.P()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof ds?e.data():hs.empty())}var os=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=Wo.exists(!0),r}return(0,r.ZT)(e,t),e}(Yo);function ss(t,e){return e}function us(t,e,n){for(var r=new fs(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var as=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return(0,r.ZT)(e,t),e}(Yo),cs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return(0,r.ZT)(e,t),e}(Yo),hs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Yi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},t.prototype.isEqual=function(t){return Vi(this.proto,t.proto)},t}(),fs=function(){function t(t){void 0===t&&(t=hs.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ci(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.O(),e)},t.prototype.Xe=function(){var t=this.nn(qr.U(),this.tn);return null!=t?new hs(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=Yi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ls(t){var e=[];return Rr(t.fields||{},(function(t,n){var r=new qr([t]);if(Yi(n)){var i=ls(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Jo(e)}var ps=function(t,e){this.key=t,this.version=e},ds=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,r.ZT)(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ps),vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,r.ZT)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ps),ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ps),gs=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=u,this.hn=null,this.cn=null,this.startAt,this.endAt};function ms(t,e,n,r,i,o,s,u){return new gs(t,e,n,r,i,o,s,u)}function bs(t){return new gs(t)}function ws(t){return!zr(t.limit)&&"F"===t.an}function Is(t){return!zr(t.limit)&&"L"===t.an}function Es(t){return t.on.length>0?t.on[0].field:null}function _s(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Ts(t){return null!==t.collectionGroup}function As(t){var e=wr(t);if(null===e.hn){e.hn=[];var n=_s(e),r=Es(e);if(null!==n&&null===r)n.W()||e.hn.push(new Ws(n)),e.hn.push(new Ws(qr.j(),"asc"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var u=s[o];e.hn.push(u),u.field.W()&&(i=!0)}if(!i){var a=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.hn.push(new Ws(qr.j(),a))}}}return e.hn}function Ns(t){var e=wr(t);if(!e.cn)if("F"===e.an)e.cn=Wr(e.path,e.collectionGroup,As(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=As(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ws(o.field,s))}var u=e.endAt?new zs(e.endAt.position,!e.endAt.before):null,a=e.startAt?new zs(e.startAt.position,!e.startAt.before):null;e.cn=Wr(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.cn}function Ss(t,e,n){return new gs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ds(t,e){return new gs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Os(t,e){return new gs(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function ks(t,e){return Yr(Ns(t),Ns(e))&&t.an===e.an}function xs(t){return Xr(Ns(t))+"|lt:"+t.an}function Ps(t){return"Query(target="+function(t){var e=t.path.B();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.B()+" "+e.op+" "+ji(e.value);var e})).join(", ")+"]"),zr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.B()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Js(t.startAt)),t.endAt&&(e+=", endAt: "+Js(t.endAt)),"Target("+e+")"}(Ns(t))+"; limitType="+t.an+")"}function Ls(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.Y(t.collectionGroup)&&t.path.M(n):Br.X(t.path)?t.path.isEqual(n):t.path.$(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.W()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hs(t.startAt,As(t),e)||t.endAt&&Hs(t.endAt,As(t),e))}(t,e)}function Rs(t){return function(e,n){for(var r=!1,i=0,o=As(t);i<o.length;i++){var s=o[i],u=Xs(s,e,n);if(0!==u)return u;r=r||s.field.W()}return 0}}var Cs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,r.ZT)(e,t),e.create=function(t,n,r){return t.W()?"in"===n||"not-in"===n?this.ln(t,n,r):new Vs(t,n,r):"array-contains"===n?new js(t,r):"in"===n?new Fs(t,r):"not-in"===n?new qs(t,r):"array-contains-any"===n?new Bs(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new Ms(t,n):new Gs(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(Gi(e,this.value)):null!==e&&Ci(this.value)===Ci(e)&&this._n(Gi(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mr()}},e.prototype.un=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Br.J(r.referenceValue),i}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=Br.D(t.key,this.key);return this._n(e)},e}(Cs),Ms=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Us(0,n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Cs),Gs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Us(0,n),r}return(0,r.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Cs);function Us(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Br.J(t.referenceValue)}))}var js=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Ki(e)&&Mi(e.arrayValue,this.value)},e}(Cs),Fs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Mi(this.value.arrayValue,e)},e}(Cs),qs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Mi(this.value.arrayValue,e)},e}(Cs),Bs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,r.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ki(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Mi(e.value.arrayValue,t)}))},e}(Cs),zs=function(t,e){this.position=t,this.before=e};function Js(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ji(t)})).join(",")}function Hs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.W()?Br.D(Br.J(s.referenceValue),n.key):Gi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ks(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}var Ws=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xs(t,e,n){var r=t.field.W()?Br.D(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Gi(r,i):mr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mr()}}function Ys(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Zs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qs=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.In=0},t.prototype.Rn=function(){this.In=this.Tn},t.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&dr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.Vn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},t.prototype.yn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},t.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},t.prototype.gn=function(){return(Math.random()-.5)*this.In},t}(),$s=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&mr(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.xn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.kn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.On=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.kn(r)},t}(),tu=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.$n((0,s.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return dr("SimpleDb","Removing database:",t),su(window.indexedDB.deleteDatabase(t)).xn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=(0,s.z$)(),n=t.$n(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={PORT:"8090",NODE_ENV:"production",API_HOST:"https://www.nykaa.com",API_INTERNAL_HOST:"http://www.nykaa-internal.com",OMIT_SOURCEMAP:"true",PLATFORM:"nykaa",GTM_ID:"GTM-MWT2MSJ",GA_ID:"UA-31866293-9",OPTIMIZE_ID:"GTM-TJ4ZB5M",SENTRY_DSN:"https://73b57b1ee3f74782bbb61d61191b761c@o1.ingest.sentry-prod.nykaa.com/51",IMPRESSION_LOG_DOMAIN:"https://prod-events.nykaa.com",googleAppId:"140085884300-na7igu81hs7fcufr0bganb40su9ab4pq.apps.googleusercontent.com",DEALS_INTERNAL_ENDPOINT:"https://nykaa-widgets.nykaa.com",DEALS_ENDPOINT:"https://www.nykaa.com/gateway-api",SEARCH_INTERNAL:"http://search-aggregator.mumbai-nyk.internal",GAMOOGA_TRACKING_ID:"96148074-8fb3-4e8c-94a0-13f2012c5623",PUBLIC_PATH:"//asset.nykaa.com",REGEX_FOR_SW_CACHING:"^https:\\/\\/asset\\.nykaa\\.com\\/static\\/.*\\.(js|svg|woff|woff2|jpg|png|jpeg)$",SP_EVENTS_URL:"https://prod-retina-api.nykaa.com/v1/events/beauty",APP_VERSION:"0.0.46",NEWRELIC_APP_ID:"1001474717",NEWRELIC_AGENT_ID:"1001474717",CMS_API_INTERNAL:"http://prod-cms-pageapi.nyk00-int.network",G_RECAPTCHA_V3:"6LcFevoUAAAAACEdtUxI8JKtDeA1ssM9rrw4B0U5"})||void 0===t?void 0:t.Un)},t.Kn=function(t,e){return t.store(e)},t.$n=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(dr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fr(hr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new nu(t,n))},i.onupgradeneeded=function(t){dr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){dr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return n.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,u,a,c;return(0,r.Jh)(this,(function(h){switch(h.label){case 0:o="readonly"===e,s=0,u=function(){var e,u,c,h,f;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,a.Qn(t)];case 2:return a.db=r.sent(),e=iu.open(a.db,t,o?"readonly":"readwrite",n),u=i(e).catch((function(t){return e.abort(t),$s.reject(t)})).xn(),c={},u.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(r.sent(),u),c)];case 4:return h=r.sent(),f="FirebaseError"!==h.name&&s<3,dr("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),eu=function(){function t(t){this.zn=t,this.Hn=!1,this.Jn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Jn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Jn=t},t.prototype.delete=function(){return su(this.zn.delete())},t}(),nu=function(t){function e(e,n){var r=this;return(r=t.call(this,hr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,r.ZT)(e,t),e}(fr);function ru(t){return"IndexedDbTransactionError"===t.name}var iu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new Zs,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new nu(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=au(e.target.error);n.Zn.reject(new nu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new nu(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(dr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ou(e)},t}(),ou=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(dr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(dr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),su(n)},t.prototype.add=function(t){return dr("SimpleDb","ADD",this.store.name,t,t),su(this.store.add(t))},t.prototype.get=function(t){var e=this;return su(this.store.get(t)).next((function(n){return void 0===n&&(n=null),dr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return dr("SimpleDb","DELETE",this.store.name,t),su(this.store.delete(t))},t.prototype.count=function(){return dr("SimpleDb","COUNT",this.store.name),su(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){dr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new $s((function(n,r){e.onerror=function(t){var e=au(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new $s((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new eu(i),s=e(i.primaryKey,i.value,o);if(s instanceof $s){var u=s.catch((function(t){return o.done(),$s.reject(t)}));n.push(u)}o.Sn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return $s.kn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function su(t){return new $s((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=au(t.target.error);n(e)}}))}var uu=!1;function au(t){var e=tu.$n((0,s.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return uu||(uu=!0,setTimeout((function(){throw r}),0)),r}}return t}function cu(){return"undefined"!=typeof window?window:null}function hu(){return"undefined"!=typeof document?document:null}var fu=function(){function t(t,e,n,r,i){this.hs=t,this.dn=e,this.cs=n,this.op=r,this.us=i,this.ls=new Zs,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new fr(hr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.hs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.us(this),clearTimeout(this.fs),this.fs=null)},t}(),lu=function(){function t(){var t=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.Vs=new Qs(this,"async_queue_retry"),this.ys=function(){var e=hu();e&&dr("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Vs.yn()};var e=hu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=hu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Ts.push(t),e.Ns()}))},t.prototype.Ns=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.Vs.reset(),[3,4];case 3:if(!ru(t=n.sent()))throw t;return dr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.Vs.Pn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Es.then((function(){return e.Ps=!0,t().catch((function(t){throw e.Rs=t,e.Ps=!1,vr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ps=!1,t}))}));return this.Es=n,n},t.prototype.Vn=function(t,e,n){var r=this;this.vs(),this.gs.indexOf(t)>-1&&(e=0);var i=fu._s(this,t,e,n,(function(t){return r.xs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&mr()},t.prototype.Fs=function(){},t.prototype.ks=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.Es];case 1:e.sent(),e.label=2;case 2:if(t!==this.Es)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Os=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.ks().then((function(){e.As.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.ks()}))},t.prototype.$s=function(t){this.gs.push(t)},t.prototype.xs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function pu(t,e){if(vr("AsyncQueue",e+": "+t),ru(t))return new fr(hr.UNAVAILABLE,e+": "+t);throw t}var du=function(){this.Ls=void 0,this.listeners=[]},vu=function(){this.Bs=new Vr((function(t){return xs(t)}),ks),this.onlineState="Unknown",this.qs=new Set};function yu(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(n=wr(t),i=e.query,o=!1,(s=n.Bs.get(i))||(o=!0,s=new du),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),u=s,[4,n.Us(i)];case 2:return u.Ls=r.sent(),[3,4];case 3:return a=r.sent(),c=pu(a,"Initialization of query '"+Ps(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(i,s),s.listeners.push(e),e.Ks(n.onlineState),s.Ls&&e.Qs(s.Ls)&&wu(n),[2]}}))}))}function gu(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u;return(0,r.Jh)(this,(function(r){return n=wr(t),i=e.query,o=!1,(s=n.Bs.get(i))&&(u=s.listeners.indexOf(e))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(i),n.Ws(i))]:[2]}))}))}function mu(t,e){for(var n=wr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.Bs.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Qs(s)&&(r=!0);a.Ls=s}}r&&wu(n)}function bu(t,e,n){var r=wr(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function wu(t){t.qs.forEach((function(t){t.next()}))}var Iu=function(){function t(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ii(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Js(t,this.onlineState)&&(this.Ys(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Js(this.zs,t)&&(this.Ys(this.zs),e=!0),e},t.prototype.Js=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=Ii.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},t}(),Eu=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Eu.UNAUTHENTICATED=new Eu(null),Eu.ei=new Eu("google-credentials-uid"),Eu.ni=new Eu("first-party-uid");var _u=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function Tu(t,e){return"firestore_clients_"+t+"_"+e}function Au(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Nu(t,e){return"firestore_targets_"+t+"_"+e}_u.ai=-1;var Su=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.hi=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new fr(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(vr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Du=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.hi=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new fr(r.error.code,r.error.message)),i?new t(e,r.state,o):(vr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ou=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.hi=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=mi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Hr(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ku=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.hi=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vr("SharedClientState","Failed to parse online state: "+e),null)},t}(),xu=function(){function t(){this.activeTargetIds=mi()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Pu=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.Ei.bind(this),this.Ti=new ii(_r),this.Ii=!1,this.mi=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Tu(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new xu),this.Pi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.gi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Vi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e,n,i,o,s,u,a,c,h,f,l=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this._i&&(o=this.getItem(Tu(this.persistenceKey,i)))&&(s=Ou.hi(i,o))&&(this.Ti=this.Ti.ot(s.clientId,s));for(this.bi(),(u=this.storage.getItem(this.yi))&&(a=this.vi(u))&&this.Si(a),c=0,h=this.mi;c<h.length;c++)f=h[c],this.Ei(f);return this.mi=[],this.window.addEventListener("unload",(function(){return l.Di()})),this.Ii=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.xi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.ki(t,"pending")},t.prototype.Oi=function(t,e,n){this.ki(t,e,n),this.Mi(t)},t.prototype.$i=function(t){var e="not-current";if(this.xi(t)){var n=this.storage.getItem(Nu(this.persistenceKey,t));if(n){var r=Du.hi(t,n);r&&(e=r.state)}}return this.Li.ui(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Nu(this.persistenceKey,t))},t.prototype.Ki=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ii&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ii=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return dr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){dr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){dr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ei=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(dr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return(0,r.mG)(e,void 0,void 0,(function(){var t,e,i,o,s,u;return(0,r.Jh)(this,(function(r){if(this.Ii){if(null!==n.key)if(this.Pi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Ji(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(i=this.Yi(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.Vi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.yi){if(null!==n.newValue&&(s=this.vi(n.newValue)))return[2,this.Si(s)]}else n.key===this.Ri&&(u=function(t){var e=_u.ai;if(null!=t)try{var n=JSON.parse(t);br("number"==typeof n),e=n}catch(t){vr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==_u.ai&&this.si(u)}else this.mi.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ci())},t.prototype.ki=function(t,e,n){var r=new Su(this.currentUser,t,e,n),i=Au(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.Mi=function(t){var e=Au(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(e))},t.prototype.Qi=function(t,e,n){var r=Nu(this.persistenceKey,t),i=new Du(t,e,n);this.setItem(r,i.ci())},t.prototype.zi=function(t){var e=this.Pi.exec(t);return e?e[1]:null},t.prototype.Ji=function(t,e){var n=this.zi(t);return Ou.hi(n,e)},t.prototype.Yi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Su.hi(new Eu(i),r,e)},t.prototype.Zi=function(t,e){var n=this.Vi.exec(t),r=Number(n[1]);return Du.hi(r,e)},t.prototype.vi=function(t){return ku.hi(t)},t.prototype.Xi=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(dr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fi.sr(s,u).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=mi();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),Lu=function(){function t(){this.ir=new xu,this.rr={},this.di=null,this.si=null}return t.prototype.Fi=function(t){},t.prototype.Oi=function(t,e,n){},t.prototype.$i=function(t){return this.ir.ui(t),this.rr[t]||"not-current"},t.prototype.Ki=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.xi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new xu,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Ru=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.hr=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Zo(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Qo(i,e,e,this.ar))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Qo(a,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),yi())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Tr(this.mutations,t.mutations,(function(t,e){return ts(t,e)}))&&Tr(this.baseMutations,t.baseMutations,(function(t,e){return ts(t,e)}))},t}(),Cu=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.cr=n,this.dr=r}return t.from=function(e,n,r){br(e.mutations.length===r.length);for(var i=di,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Vu=function(){function t(){this.wr=new Vr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Er=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Ir=function(t,e){this.mr(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.mr(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.mr();var n=this.wr.get(e);return void 0!==n?$s.resolve(n):this.Pr(t,e)},t.prototype.getEntries=function(t,e){return this.gr(t,e)},t.prototype.apply=function(t){return this.mr(),this.Er=!0,this.Vr(t)},t.prototype.mr=function(){},t}(),Mu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gu=function(){function t(){this.yr=[]}return t.prototype.pr=function(t){this.yr.push(t)},t.prototype.br=function(){this.yr.forEach((function(t){return t()}))},t}(),Uu=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.kr=function(t,e,n){var r=fi();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.ot(t,e)})),r},t.prototype.Or=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.$r(t,e).next((function(r){var i=n.kr(t,e,r),o=hi();return i.forEach((function(t,e){e||(e=new vs(t,Gr.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return Br.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Ts(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new Br(e)).next((function(t){var e=pi();return t instanceof ds&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=pi();return this.Dr.Kr(t,i).next((function(s){return $s.forEach(s,(function(s){var u=function(t,e){return new gs(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,u,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Qr(t,e)})).next((function(e){return i=e,o.Wr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Qo(a,h,h,o.ar);r=f instanceof ds?r.ot(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ls(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=yi(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof rs&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ds&&(c=c.ot(t,e))})),c}))},t}(),ju=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Gr=r}return t.zr=function(e,n){for(var r=yi(),i=yi(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function Fu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=_r(n,i);return 0===s?_r(r,o):s}var qu=function(){function t(t){this.Hr=t,this.buffer=new ui(Fu),this.Jr=0}return t.prototype.Yr=function(){return++this.Jr},t.prototype.Xr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Fu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Bu={Zr:!1,eo:0,no:0,so:0},zu=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.ho,t.co)},t}();zu.uo=-1,zu.lo=1048576,zu._o=41943040,zu.ho=10,zu.co=1e3,zu.fo=new zu(zu._o,zu.ho,zu.co),zu.do=new zu(zu.uo,0,0);var Ju=function(){function t(t,e){this.wo=t,this.hs=e,this.Eo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==zu.uo&&this.Io(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ii",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Io=function(t){var e=this,n=this.Eo?3e5:6e4;dr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.hs.Vn("lru_garbage_collection",n,(function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:this.To=null,this.Eo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.mo(this.wo)];case 2:return n.sent(),[3,7];case 3:return ru(e=n.sent())?(dr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Io(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Hu=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vo=function(t,e){var n=this;if(0===e)return $s.resolve(_u.ai);var r=new qu(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.yo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===zu.uo?(dr("LruGarbageCollector","Garbage collection skipped; disabled"),$s.resolve(Bu)):this.So(t).next((function(r){return r<n.params.io?(dr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),Bu):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,s,u,a,c,h=this,f=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>h.params.oo?(dr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.oo+" from "+e),r=h.params.oo):r=e,s=Date.now(),h.Vo(t,r)})).next((function(r){return n=r,u=Date.now(),h.po(t,n,e)})).next((function(e){return i=e,a=Date.now(),h.bo(t,n)})).next((function(t){return c=Date.now(),pr()<=o.in.DEBUG&&dr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+r+" in "+(u-s)+"ms\n\tRemoved "+i+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-f)+"ms"),$s.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();function Ku(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Xu(e)),e=Wu(t.get(n),e);return Xu(e)}function Wu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Xu(t){return t+""}function Yu(t){var e=t.length;if(br(e>=2),2===e)return br(""===t.charAt(0)&&""===t.charAt(1)),jr.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&mr(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:mr()}o=s+2}return new jr(r)}var Zu=function(t){this.Co=t};function Qu(t,e){if(e.document)return function(t,e,n){var r=ho(t,e.name),i=so(e.updateTime),o=new hs({mapValue:{fields:e.fields}});return new ds(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Br.Z(e.noDocument.path),r=ra(e.noDocument.readTime);return new vs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Br.Z(e.unknownDocument.path),o=ra(e.unknownDocument.version);return new ys(i,o)}return mr()}function $u(t,e,n){var r=ta(n),i=e.key.path.F().L();if(e instanceof ds){var o=function(t,e){return{name:co(t,e.key),fields:e.rn().mapValue.fields,updateTime:ro(t,e.version.v())}}(t.Co,e),s=e.hasCommittedMutations;return new Oa(null,null,o,s,r,i)}if(e instanceof vs){var u=e.key.path.L(),a=na(e.version),c=e.hasCommittedMutations;return new Oa(null,new Sa(u,a),null,c,r,i)}if(e instanceof ys){var h=e.key.path.L(),f=na(e.version);return new Oa(new Da(h,f),null,null,!0,r,i)}return mr()}function ta(t){var e=t.v();return[e.seconds,e.nanoseconds]}function ea(t){var e=new Mr(t[0],t[1]);return Gr.V(e)}function na(t){var e=t.v();return new Ea(e.seconds,e.nanoseconds)}function ra(t){var e=new Mr(t.seconds,t.nanoseconds);return Gr.V(e)}function ia(t,e){var n=(e.baseMutations||[]).map((function(e){return mo(t.Co,e)})),r=e.mutations.map((function(e){return mo(t.Co,e)})),i=Mr.fromMillis(e.localWriteTimeMs);return new Ru(e.batchId,i,n,r)}function oa(t){var e,n,r=ra(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ra(t.lastLimboFreeSnapshotVersion):Gr.min();return void 0!==t.query.documents?(br(1===(n=t.query).documents.length),e=Ns(bs(lo(n.documents[0])))):e=Io(t.query),new ti(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Nr.fromBase64String(t.resumeToken))}function sa(t,e){var n,r=na(e.nt),i=na(e.lastLimboFreeSnapshotVersion);n=Zr(e.target)?bo(t.Co,e.target):wo(t.Co,e.target);var o=e.resumeToken.toBase64();return new xa(e.targetId,Xr(e.target),r,o,e.sequenceNumber,i,n)}var ua=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.xo={}}return t.Fo=function(e,n,r,i){return br(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.ko=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ha(t).rs({index:Aa.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Oo=function(t,e,n,r){var i=this,o=fa(t),s=ha(t);return s.add({}).next((function(u){br("number"==typeof u);for(var a=new Ru(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return go(t.Co,e)})),i=n.mutations.map((function(e){return go(t.Co,e)}));return new Aa(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new ui((function(t,e){return _r(t.B(),e.B())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Na.key(i.userId,d.key.path,u);f=f.add(d.key.path.F()),h.push(s.put(c)),h.push(o.put(v,Na.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Dr.Mo(t,e))})),t.pr((function(){i.xo[u]=a.keys()})),$s.kn(h).next((function(){return a}))}))},t.prototype.$o=function(t,e){var n=this;return ha(t).get(e).next((function(t){return t?(br(t.userId===n.userId),ia(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.xo[e]?$s.resolve(this.xo[e]):this.$o(t,e).next((function(t){if(t){var r=t.keys();return n.xo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ha(t).rs({index:Aa.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(br(e.batchId>=r),o=ia(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ha(t).rs({index:Aa.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ha(t).ts(Aa.userMutationsIndex,n).next((function(t){return t.map((function(t){return ia(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Na.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return fa(t).rs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Yu(a);if(u===n.userId&&e.path.isEqual(h))return ha(t).get(c).next((function(t){if(!t)throw mr();br(t.userId===n.userId),o.push(ia(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.$r=function(t,e){var n=this,r=new ui(_r),i=[];return e.forEach((function(e){var o=Na.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=fa(t).rs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Yu(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),$s.kn(i).next((function(){return n.Ko(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Na.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new ui(_r);return fa(t).rs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Yu(a);s===n.userId&&r.M(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ko(t,u)}))},t.prototype.Ko=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ha(t).get(e).next((function(t){if(null===t)throw mr();br(t.userId===n.userId),r.push(ia(n.serializer,t))})))})),$s.kn(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return ca(t.Wo,this.userId,e).next((function(r){return t.pr((function(){n.jo(e.batchId)})),$s.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.jo=function(t){delete this.xo[t]},t.prototype.zo=function(t){var e=this;return this.ko(t).next((function(n){if(!n)return $s.resolve();var r=IDBKeyRange.lowerBound(Na.prefixForUser(e.userId)),i=[];return fa(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Yu(t[1]);i.push(o)}else r.done()})).next((function(){br(0===i.length)}))}))},t.prototype.Ho=function(t,e){return aa(t,this.userId,e)},t.prototype.Jo=function(t){var e=this;return la(t).get(this.userId).next((function(t){return t||new Ta(e.userId,-1,"")}))},t}();function aa(t,e,n){var r=Na.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fa(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function ca(t,e,n){var r=t.store(Aa.store),i=t.store(Na.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.rs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){br(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Na.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return $s.kn(o).next((function(){return c}))}function ha(t){return Ka.Kn(t,Aa.store)}function fa(t){return Ka.Kn(t,Na.store)}function la(t){return Ka.Kn(t,Ta.store)}var pa=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Ir=function(t,e,n){return ya(t).put(ga(e),n)},t.prototype.Ar=function(t,e){var n=ya(t),r=ga(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return ya(t).get(ga(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return ya(t).get(ga(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:ma(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=fi();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=fi(),i=new ii(Br.D);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,ma(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.P())return $s.resolve();var r=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),i=e._t(),o=i.It();return ya(t).rs({range:r},(function(t,e,r){for(var s=Br.Z(t);o&&Br.D(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.L()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=pi(),o=e.path.length+1,s={};if(n.isEqual(Gr.min())){var u=e.path.L();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.L(),c=ta(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Oa.collectionReadTimeIndex}return ya(t).rs(s,(function(t,n,s){if(t.length===o){var u=Qu(r.serializer,n);e.path.M(u.key.path)?u instanceof ds&&Ls(e,u)&&(i=i.ot(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new da(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return va(t).get(ka.key).next((function(t){return br(!!t),t}))},t.prototype.Yo=function(t,e){return va(t).put(ka.key,e)},t.prototype.Xo=function(t){if(t){var e=Qu(this.serializer,t);return e instanceof vs&&e.version.isEqual(Gr.min())?null:e}return null},t}(),da=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ha=e,r.oa=n,r.ca=new Vr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,r.ZT)(e,t),e.prototype.Vr=function(t){var e=this,n=[],r=0,i=new ui((function(t,e){return _r(t.B(),e.B())}));return this.wr.forEach((function(o,s){var u=e.ca.get(o);if(s){var a=$u(e.ha.serializer,s,e.readTime);i=i.add(o.path.F());var c=ma(a);r+=c-u,n.push(e.ha.Ir(t,o,a))}else if(r-=u,e.oa){var h=$u(e.ha.serializer,new vs(o,Gr.min()),e.readTime);n.push(e.ha.Ir(t,o,h))}else n.push(e.ha.Ar(t,o))})),i.forEach((function(r){n.push(e.ha.Dr.Mo(t,r))})),n.push(this.ha.updateMetadata(t,r)),$s.kn(n)},e.prototype.Pr=function(t,e){var n=this;return this.ha.Zo(t,e).next((function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.ta)}))},e.prototype.gr=function(t,e){var n=this;return this.ha.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ca.set(t,e)})),e}))},e}(Vu);function va(t){return Ka.Kn(t,ka.store)}function ya(t){return Ka.Kn(t,Oa.store)}function ga(t){return t.path.L()}function ma(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw mr();e=t.noDocument}return JSON.stringify(e).length}var ba=function(){function t(){this.ua=new wa}return t.prototype.Mo=function(t,e){return this.ua.add(e),$s.resolve()},t.prototype.Kr=function(t,e){return $s.resolve(this.ua.getEntries(e))},t}(),wa=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.O(),n=t.F(),r=this.index[e]||new ui(jr.D),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.O(),n=t.F(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ui(jr.D)).L()},t}(),Ia=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;br(n<r&&n>=0&&r<=10);var o=new iu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(_a.store)}(t),function(t){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath}),t.createObjectStore(Aa.store,{keyPath:Aa.keyPath,autoIncrement:!0}).createIndex(Aa.userMutationsIndex,Aa.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Na.store)}(t),Ca(t),function(t){t.createObjectStore(Oa.store)}(t));var s=$s.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Pa.store),t.deleteObjectStore(xa.store),t.deleteObjectStore(La.store)}(t),Ca(t)),s=s.next((function(){return function(t){var e=t.store(La.store),n=new La(0,0,Gr.min().v(),0);return e.put(La.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Aa.store).ts().next((function(n){t.deleteObjectStore(Aa.store),t.createObjectStore(Aa.store,{keyPath:Aa.keyPath,autoIncrement:!0}).createIndex(Aa.userMutationsIndex,Aa.userMutationsKeyPath,{unique:!0});var r=e.store(Aa.store),i=n.map((function(t){return r.put(t)}));return $s.kn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Va.store,{keyPath:Va.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ka.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Oa.store);e.createIndex(Oa.readTimeIndex,Oa.readTimeIndexPath,{unique:!1}),e.createIndex(Oa.collectionReadTimeIndex,Oa.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Oa.store).rs((function(t,n){e+=ma(n)})).next((function(){var n=new ka(e);return t.store(ka.store).put(ka.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Ta.store),r=t.store(Aa.store);return n.ts().next((function(n){return $s.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Aa.userMutationsIndex,i).next((function(r){return $s.forEach(r,(function(r){br(r.userId===n.userId);var i=ia(e.serializer,r);return ca(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Pa.store),n=t.store(Oa.store);return t.store(La.store).get(La.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new jr(n),s=function(t){return[0,Ku(t)]}(o);r.push(e.get(s).next((function(n){return n?$s.resolve():function(n){return e.put(new Pa(0,Ku(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return $s.kn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ra.store,{keyPath:Ra.keyPath});var n=e.store(Ra.store),r=new wa,i=function(t){if(r.add(t)){var e=t.O(),i=t.F();return n.put({collectionId:e,parent:Ku(i)})}};return e.store(Oa.store).rs({ss:!0},(function(t,e){var n=new jr(t);return i(n.F())})).next((function(){return e.store(Na.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Yu(n));return i(r.F())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(xa.store);return n.rs((function(t,r){var i=oa(r),o=sa(e.serializer,i);return n.put(o)}))},t}(),Ea=function(t,e){this.seconds=t,this.nanoseconds=e},_a=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};_a.store="owner",_a.key="owner";var Ta=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ta.store="mutationQueues",Ta.keyPath="userId";var Aa=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Aa.store="mutations",Aa.keyPath="batchId",Aa.userMutationsIndex="userMutationsIndex",Aa.userMutationsKeyPath=["userId","batchId"];var Na=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ku(e)]},t.key=function(t,e,n){return[t,Ku(e),n]},t}();Na.store="documentMutations",Na.PLACEHOLDER=new Na;var Sa=function(t,e){this.path=t,this.readTime=e},Da=function(t,e){this.path=t,this.version=e},Oa=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Oa.store="remoteDocuments",Oa.readTimeIndex="readTimeIndex",Oa.readTimeIndexPath="readTime",Oa.collectionReadTimeIndex="collectionReadTimeIndex",Oa.collectionReadTimeIndexPath=["parentPath","readTime"];var ka=function(t){this.byteSize=t};ka.store="remoteDocumentGlobal",ka.key="remoteDocumentGlobalKey";var xa=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};xa.store="targets",xa.keyPath="targetId",xa.queryTargetsIndexName="queryTargetsIndex",xa.queryTargetsKeyPath=["canonicalId","targetId"];var Pa=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Pa.store="targetDocuments",Pa.keyPath=["targetId","path"],Pa.documentTargetsIndex="documentTargetsIndex",Pa.documentTargetsKeyPath=["path","targetId"];var La=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};La.key="targetGlobalKey",La.store="targetGlobal";var Ra=function(t,e){this.collectionId=t,this.parent=e};function Ca(t){t.createObjectStore(Pa.store,{keyPath:Pa.keyPath}).createIndex(Pa.documentTargetsIndex,Pa.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xa.store,{keyPath:xa.keyPath}).createIndex(xa.queryTargetsIndexName,xa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(La.store)}Ra.store="collectionParents",Ra.keyPath=["collectionId","parent"];var Va=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Va.store="clientMetadata",Va.keyPath="clientId";var Ma=(0,r.pr)((0,r.pr)((0,r.pr)([Ta.store,Aa.store,Na.store,Oa.store,xa.store,_a.store,La.store,Pa.store],[Va.store]),[ka.store]),[Ra.store]),Ga=function(){function t(){this.la=new wa}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e.O(),i=e.F();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:Ku(i)};return Ua(t).put(o)}return $s.resolve()},t.prototype.Kr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ar(e),""],!1,!0);return Ua(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Yu(o.parent))}return n}))},t}();function Ua(t){return Ka.Kn(t,Ra.store)}var ja=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),Fa=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.Ea(t).next((function(n){var r=new ja(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ia=function(t){return this.Ea(t).next((function(t){return Gr.V(new Mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ma=function(t){return this.Ea(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.Ea(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.v()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.Pa(t,e).next((function(){return n.Ea(t).next((function(r){return r.targetCount+=1,n.ga(e,r),n.Ta(t,r)}))}))},t.prototype.Va=function(t,e){return this.Pa(t,e)},t.prototype.ya=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return qa(t).delete(e.targetId)})).next((function(){return n.Ea(t)})).next((function(e){return br(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return qa(t).rs((function(s,u){var a=oa(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.ya(t,a)))})).next((function(){return $s.kn(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return qa(t).rs((function(t,n){var r=oa(n);e(r)}))},t.prototype.Ea=function(t){return Ba(t).get(La.key).next((function(t){return br(null!==t),t}))},t.prototype.Ta=function(t,e){return Ba(t).put(La.key,e)},t.prototype.Pa=function(t,e){return qa(t).put(sa(this.serializer,e))},t.prototype.ga=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.Ea(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=Xr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return qa(t).rs({range:r,index:xa.queryTargetsIndexName},(function(t,n,r){var o=oa(n);Yr(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=za(t);return e.forEach((function(e){var s=Ku(e.path);i.push(o.put(new Pa(n,s))),i.push(r.No.Da(t,n,e))})),$s.kn(i)},t.prototype.Ca=function(t,e,n){var r=this,i=za(t);return $s.forEach(e,(function(e){var o=Ku(e.path);return $s.kn([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=za(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=za(t),i=yi();return r.rs({range:n,ss:!0},(function(t,e,n){var r=Yu(t[1]),o=new Br(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=Ku(e.path),r=IDBKeyRange.bound([n],[Ar(n)],!1,!0),i=0;return za(t).rs({index:Pa.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return qa(t).get(e).next((function(t){return t?oa(t):null}))},t}();function qa(t){return Ka.Kn(t,xa.store)}function Ba(t){return Ka.Kn(t,La.store)}function za(t){return Ka.Kn(t,Pa.store)}var Ja="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ha=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Fa=n,r}return(0,r.ZT)(e,t),e}(Gu),Ka=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=u,this.ka=c,this.Oa=h,this.Ma=null,this.$a=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!t.Ln())throw new fr(hr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new Ya(this,i),this.Qa=n+"main",this.serializer=new Zu(a),this.Wa=new tu(this.Qa,10,new Ia(this.serializer)),this.ja=new Fa(this.No,this.serializer),this.Dr=new Ga,this.vr=function(t,e){return new pa(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===h&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Kn=function(t,e){if(t instanceof Ha)return tu.Kn(t.Wo,e);throw mr()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fr(hr.FAILED_PRECONDITION,Ja);return t.Ha(),t.Ja(),t.Ya(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ja.ma(e)}))})).then((function(e){t.Ma=new _u(e,t.ka)})).then((function(){t.$a=!0})).catch((function(e){return t.Wa&&t.Wa.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Ka=function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return this.Ii?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.Wa.jn((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.th=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.Ii?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Xa(e).put(new Va(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.eh(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Ka(!1)})))}))})).next((function(){return t.nh(e)})).next((function(n){return t.isPrimary&&!n?t.sh(e).next((function(){return!1})):!!n&&t.ih(e).next((function(){return!0}))}))})).catch((function(e){if(ru(e))return dr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return dr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Ka(e)})),t.isPrimary=e}))},t.prototype.eh=function(t){var e=this;return Wa(t).get(_a.key).next((function(t){return $s.resolve(e.rh(t))}))},t.prototype.oh=function(t){return Xa(t).delete(this.clientId)},t.prototype.ah=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,s=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.hh(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Kn(e,Va.store);return n.ts().next((function(t){var e=s.uh(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return $s.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ga)for(n=0,i=e;n<i.length;n++)o=i[n],this.Ga.removeItem(this.lh(o.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.Ya=function(){var t=this;this.qa=this.fn.Vn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ah()})).then((function(){return t.Ya()}))}))},t.prototype.rh=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nh=function(t){var e=this;return this.Oa?$s.resolve(!0):Wa(t).get(_a.key).next((function(n){if(null!==n&&e.hh(n.leaseTimestampMs,5e3)&&!e._h(n.ownerId)){if(e.rh(n)&&e.networkEnabled)return!0;if(!e.rh(n)){if(!n.allowTabSynchronization)throw new fr(hr.FAILED_PRECONDITION,Ja);return!1}}return!(!e.networkEnabled||!e.inForeground)||Xa(t).ts().next((function(t){return void 0===e.uh(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&dr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t=this;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.$a=!1,this.fh(),this.qa&&(this.qa.cancel(),this.qa=null),this.dh(),this.wh(),[4,this.Wa.runTransaction("shutdown","readwrite",[_a.store,Va.store],(function(e){var n=new Ha(e,_u.ai);return t.sh(n).next((function(){return t.oh(n)}))}))];case 1:return e.sent(),this.Wa.close(),this.Eh(),[2]}}))}))},t.prototype.uh=function(t,e){var n=this;return t.filter((function(t){return n.hh(t.updateTimeMs,e)&&!n._h(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Xa(e).ts().next((function(e){return t.uh(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Th=function(t){return ua.Fo(t,this.serializer,this.Dr,this.No)},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.Ah=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;dr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Wa.runTransaction(t,o,Ma,(function(o){return i=new Ha(o,r.Ma?r.Ma.next():_u.ai),"readwrite-primary"===e?r.eh(i).next((function(t){return!!t||r.nh(i)})).next((function(e){if(!e)throw vr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Ka(!1)})),new fr(hr.FAILED_PRECONDITION,Mu);return n(i)})).next((function(t){return r.ih(i).next((function(){return t}))})):r.Rh(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Rh=function(t){var e=this;return Wa(t).get(_a.key).next((function(t){if(null!==t&&e.hh(t.leaseTimestampMs,5e3)&&!e._h(t.ownerId)&&!e.rh(t)&&!(e.Oa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fr(hr.FAILED_PRECONDITION,Ja)}))},t.prototype.ih=function(t){var e=new _a(this.clientId,this.allowTabSynchronization,Date.now());return Wa(t).put(_a.key,e)},t.Ln=function(){return tu.Ln()},t.prototype.sh=function(t){var e=this,n=Wa(t);return n.get(_a.key).next((function(t){return e.rh(t)?(dr("IndexedDbPersistence","Releasing primary lease."),n.delete(_a.key)):$s.resolve()}))},t.prototype.hh=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.dh=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ja=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e.fh(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.wh=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype._h=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.lh(t)));return dr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.fh=function(){if(this.Ga)try{this.Ga.setItem(this.lh(this.clientId),String(Date.now()))}catch(t){vr("Failed to set zombie client id.",t)}},t.prototype.Eh=function(){if(this.Ga)try{this.Ga.removeItem(this.lh(this.clientId))}catch(t){}},t.prototype.lh=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Wa(t){return Ka.Kn(t,_a.store)}function Xa(t){return Ka.Kn(t,Va.store)}var Ya=function(){function t(t,e){this.db=t,this.wo=new Hu(this,e)}return t.prototype.Po=function(t){var e=this.Ph(t);return this.db.Ih().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ph=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Ih().Ce(t,e)},t.prototype.yo=function(t,e){return this.gh(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return Za(t,n)},t.prototype.Na=function(t,e,n){return Za(t,n)},t.prototype.po=function(t,e,n){return this.db.Ih().po(t,e,n)},t.prototype.Go=function(t,e){return Za(t,e)},t.prototype.Vh=function(t,e){return function(t,e){var n=!1;return la(t).os((function(r){return aa(t,r,e).next((function(t){return t&&(n=!0),$s.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.mh().ra(),i=[],o=0;return this.gh(t,(function(s,u){if(u<=e){var a=n.Vh(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),za(t).delete([0,Ku(s.path)])}))}));i.push(a)}})).next((function(){return $s.kn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.Fa);return this.db.Ih().Va(t,n)},t.prototype.yh=function(t,e){return Za(t,e)},t.prototype.gh=function(t,e){var n,r=za(t),i=_u.ai;return r.rs({index:Pa.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==_u.ai&&e(new Br(Yu(n)),i),i=u,n=s):i=_u.ai})).next((function(){i!==_u.ai&&e(new Br(Yu(n)),i)}))},t.prototype.So=function(t){return this.db.mh().aa(t)},t}();function Za(t,e){return za(t).put(function(t,e){return new Pa(0,Ku(t.path),e)}(e,t.Fa))}function Qa(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var $a=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new ii(_r),this.Sh=new Vr((function(t){return Xr(t)}),Yr),this.Dh=Gr.min(),this.Sr=t.Th(n),this.Ch=t.mh(),this.ja=t.Ih(),this.Nh=new Uu(this.Ch,this.Sr,this.persistence.Ah()),this.ph.xh(this.Nh)}return t.prototype.mo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bh)}))},t}();function tc(t,e){var n=wr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ch.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=$s.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);br(null!==s),(!o||o.version.h(s)<0)&&(o=i.hr(t,o,n))&&r.Ir(o,n._r)}))})),s.next((function(){return t.Sr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}function ec(t){var e=wr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ja.Ia(t)}))}function nc(t,e){var n=wr(t),r=e.nt,i=n.bh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ch.ra({oa:!0});i=n.bh;var s=[];e.zt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ja.Ca(t,e.se,o).next((function(){return n.ja.Sa(t,e.ee,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.it(a,r).st(t.Fa);i=i.ot(o,c),function(t,e,n){return br(e.resumeToken.o()>0),0===t.resumeToken.o()||e.nt.p()-t.nt.p()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(u,c,e)&&s.push(n.ja.Va(t,c))}}}));var u=hi(),a=yi();if(e.Jt.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Jt.forEach((function(a,c){var h=i.get(a);c instanceof vs&&c.version.isEqual(Gr.min())?(o.Ar(a,r),u=u.ot(a,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(o.Ir(c,r),u=u.ot(a,c)):dr("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version),e.Yt.has(a)&&s.push(n.persistence.No.yh(t,a))}))}))),!r.isEqual(Gr.min())){var c=n.ja.Ia(t).next((function(e){return n.ja.Aa(t,t.Fa,r)}));s.push(c)}return $s.kn(s).next((function(){return o.apply(t)})).next((function(){return n.Nh.Mr(t,u)}))})).then((function(t){return n.bh=i,t}))}function rc(t,e){var n=wr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function ic(t,e){var n=wr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ja.va(t,e).next((function(i){return i?(r=i,$s.resolve(r)):n.ja.wa(t).next((function(i){return r=new ti(e,i,0,t.Fa),n.ja.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bh.get(t.targetId);return(null===r||t.nt.h(r.nt)>0)&&(n.bh=n.bh.ot(t.targetId,t),n.Sh.set(e,t.targetId)),t}))}function oc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=wr(t),o=i.bh.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.No.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ru(u=r.sent()))throw u;return dr("LocalStore","Failed to update sequence numbers for target "+e+": "+u),[3,5];case 5:return i.bh=i.bh.remove(e),i.Sh.delete(o.target),[2]}}))}))}function sc(t,e,n){var r=wr(t),i=Gr.min(),o=yi();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=wr(t),i=r.Sh.get(n);return void 0!==i?$s.resolve(r.bh.get(i)):r.ja.va(e,n)}(r,t,Ns(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ja.xa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.ph.Lr(t,e,n?i:Gr.min(),n?o:yi())})).next((function(t){return{documents:t,Fh:o}}))}))}function uc(t,e){var n=wr(t),r=wr(n.ja),i=n.bh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function ac(t){var e=wr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=wr(t),i=hi(),o=ta(n),s=ya(e),u=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Oa.readTimeIndex,range:u},(function(t,e){var n=Qu(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{kh:i,readTime:ea(o)}}))}(e.Ch,t,e.Dh)})).then((function(t){var n=t.kh,r=t.readTime;return e.Dh=r,n}))}function cc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){return[2,(e=wr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ya(t),n=Gr.min();return e.rs({index:Oa.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ea(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Dh=t}))]}))}))}function hc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){if(t.code!==hr.FAILED_PRECONDITION||t.message!==Mu)throw t;return dr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var fc=function(){function t(){this.Oh=new ui(lc.Mh),this.$h=new ui(lc.Lh)}return t.prototype.P=function(){return this.Oh.P()},t.prototype.Da=function(t,e){var n=new lc(t,e);this.Oh=this.Oh.add(n),this.$h=this.$h.add(n)},t.prototype.Bh=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.qh(new lc(t,e))},t.prototype.Uh=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Kh=function(t){var e=this,n=new Br(new jr([])),r=new lc(n,t),i=new lc(n,t+1),o=[];return this.$h.xt([r,i],(function(t){e.qh(t),o.push(t.key)})),o},t.prototype.Qh=function(){var t=this;this.Oh.forEach((function(e){return t.qh(e)}))},t.prototype.qh=function(t){this.Oh=this.Oh.delete(t),this.$h=this.$h.delete(t)},t.prototype.Wh=function(t){var e=new Br(new jr([])),n=new lc(e,t),r=new lc(e,t+1),i=yi();return this.$h.xt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new lc(t,0),n=this.Oh.kt(e);return null!==n&&t.isEqual(n.key)},t}(),lc=function(){function t(t,e){this.key=t,this.jh=e}return t.Mh=function(t,e){return Br.D(t.key,e.key)||_r(t.jh,e.jh)},t.Lh=function(t,e){return _r(t.jh,e.jh)||Br.D(t.key,e.key)},t}(),pc=function(t,e){this.user=e,this.type="OAuth",this.Gh={},this.Gh.Authorization="Bearer "+t},dc=function(){function t(){this.zh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Hh=function(){},t.prototype.Jh=function(t){this.zh=t,t(Eu.UNAUTHENTICATED)},t.prototype.Yh=function(){this.zh=null},t}(),vc=function(){function t(t){var e=this;this.Xh=null,this.currentUser=Eu.UNAUTHENTICATED,this.Zh=!1,this.tc=0,this.zh=null,this.forceRefresh=!1,this.Xh=function(){e.tc++,e.currentUser=e.ec(),e.Zh=!0,e.zh&&e.zh(e.currentUser)},this.tc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Xh):(this.Xh(null),t.get().then((function(t){e.auth=t,e.Xh&&e.auth.addAuthTokenListener(e.Xh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.tc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.tc!==e?(dr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(br("string"==typeof n.accessToken),new pc(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Hh=function(){this.forceRefresh=!0},t.prototype.Jh=function(t){this.zh=t,this.Zh&&t(this.currentUser)},t.prototype.Yh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Xh),this.Xh=null,this.zh=null},t.prototype.ec=function(){var t=this.auth&&this.auth.getUid();return br(null===t||"string"==typeof t),new Eu(t)},t}(),yc=function(){function t(t,e){this.nc=t,this.sc=e,this.type="FirstParty",this.user=Eu.ni}return Object.defineProperty(t.prototype,"Gh",{get:function(){var t={"X-Goog-AuthUser":this.sc},e=this.nc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),gc=function(){function t(t,e){this.nc=t,this.sc=e}return t.prototype.getToken=function(){return Promise.resolve(new yc(this.nc,this.sc))},t.prototype.Jh=function(t){t(Eu.ni)},t.prototype.Yh=function(){},t.prototype.Hh=function(){},t}(),mc=function(){function t(t,e,n,r,i,o){this.fn=t,this.ic=n,this.rc=r,this.oc=i,this.listener=o,this.state=0,this.ac=0,this.hc=null,this.stream=null,this.Vs=new Qs(t,e)}return t.prototype.cc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.lc()},t.prototype.stop=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.cc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype._c=function(){this.state=0,this.Vs.reset()},t.prototype.fc=function(){var t=this;this.uc()&&null===this.hc&&(this.hc=this.fn.Vn(this.ic,6e4,(function(){return t.dc()})))},t.prototype.wc=function(t){this.Ec(),this.stream.send(t)},t.prototype.dc=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.uc()?[2,this.close(0)]:[2]}))}))},t.prototype.Ec=function(){this.hc&&(this.hc.cancel(),this.hc=null)},t.prototype.close=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return this.Ec(),this.Vs.cancel(),this.ac++,3!==t?this.Vs.reset():e&&e.code===hr.RESOURCE_EXHAUSTED?(vr(e.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.Vs.Rn()):e&&e.code===hr.UNAUTHENTICATED&&this.oc.Hh(),null!==this.stream&&(this.Tc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ic(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.mc(this.ac),n=this.ac;this.oc.getToken().then((function(e){t.ac===n&&t.Ac(e)}),(function(n){e((function(){var e=new fr(hr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rc(e)}))}))},t.prototype.Ac=function(t){var e=this,n=this.mc(this.ac);this.stream=this.Pc(t),this.stream.gc((function(){n((function(){return e.state=2,e.listener.gc()}))})),this.stream.Ic((function(t){n((function(){return e.Rc(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.lc=function(){var t=this;this.state=4,this.Vs.Pn((function(){return(0,r.mG)(t,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Rc=function(t){return dr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.mc=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ac===t?n():(dr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),bc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return(0,r.ZT)(e,t),e.prototype.Pc=function(t){return this.rc.Vc("Listen",t)},e.prototype.onMessage=function(t){this.Vs.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:mr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ke?(br(void 0===e||"string"==typeof e),Nr.fromBase64String(e||"")):(br(void 0===e||e instanceof Uint8Array),Nr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?hr.UNKNOWN:ri(t.code);return new fr(e,t.message||"")}(s);n=new Ni(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=ho(t,a.document.name),h=so(a.document.updateTime),f=new hs({mapValue:{fields:a.document.fields}}),l=new ds(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new Ti(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=ho(t,v.document),g=v.readTime?so(v.readTime):Gr.min(),m=new vs(y,g),b=v.removedTargetIds||[];n=new Ti([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var I=ho(t,w.document),E=w.removedTargetIds||[];n=new Ti([],E,I,null)}else{if(!("filter"in e))return mr();e.filter;var _=e.filter;_.targetId;var T=_.count||0,A=new ei(T),N=_.targetId;n=new Ai(N,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Gr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Gr.min():e.readTime?so(e.readTime):Gr.min()}(t);return this.listener.yc(e,n)},e.prototype.bc=function(t){var e={};e.database=po(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Zr(r)?{documents:bo(t,r)}:{query:wo(t,r)}).targetId=e.targetId,e.resumeToken.o()>0&&(n.resumeToken=io(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mr()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.wc(e)},e.prototype.vc=function(t){var e={};e.database=po(this.serializer),e.removeTarget=t,this.wc(e)},e}(mc),wc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Sc=!1,s}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"Dc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Sc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Tc=function(){this.Sc&&this.Cc([])},e.prototype.Pc=function(t){return this.rc.Vc("Write",t)},e.prototype.onMessage=function(t){if(br(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Sc){this.Vs.reset();var e=function(t,e){return t&&t.length>0?(br(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?so(t.updateTime):so(e);n.isEqual(Gr.min())&&(n=so(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Ko(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=so(t.commitTime);return this.listener.Nc(n,e)}return br(!t.writeResults||0===t.writeResults.length),this.Sc=!0,this.listener.xc()},e.prototype.Fc=function(){var t={};t.database=po(this.serializer),this.wc(t)},e.prototype.Cc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return go(e.serializer,t)}))};this.wc(n)},e}(mc),Ic=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.rc=n,i.serializer=r,i.kc=!1,i}return(0,r.ZT)(e,t),e.prototype.Oc=function(){if(this.kc)throw new fr(hr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mc=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.Mc(t,e,n,i)})).catch((function(t){throw t.code===hr.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.$c=function(t,e,n){var r=this;return this.Oc(),this.credentials.getToken().then((function(i){return r.rc.$c(t,e,n,i)})).catch((function(t){throw t.code===hr.UNAUTHENTICATED&&r.credentials.Hh(),t}))},e.prototype.terminate=function(){this.kc=!1},e}((function(){})),Ec=function(){function t(t,e){this.hs=t,this.di=e,this.state="Unknown",this.Lc=0,this.Bc=null,this.qc=!0}return t.prototype.Uc=function(){var t=this;0===this.Lc&&(this.Kc("Unknown"),this.Bc=this.hs.Vn("online_state_timeout",1e4,(function(){return t.Bc=null,t.Qc("Backend didn't respond within 10 seconds."),t.Kc("Offline"),Promise.resolve()})))},t.prototype.Wc=function(t){"Online"===this.state?this.Kc("Unknown"):(this.Lc++,this.Lc>=1&&(this.jc(),this.Qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Kc("Offline")))},t.prototype.set=function(t){this.jc(),this.Lc=0,"Online"===t&&(this.qc=!1),this.Kc(t)},t.prototype.Kc=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qc?(vr(e),this.qc=!1):dr("OnlineStateTracker",e)},t.prototype.jc=function(){null!==this.Bc&&(this.Bc.cancel(),this.Bc=null)},t}(),_c=function(t,e,n,i,o){var s=this;this.Gc=t,this.zc=e,this.hs=n,this.Hc={},this.Jc=[],this.Yc=new Map,this.Xc=new Set,this.Zc=[],this.tu=o,this.tu.eu((function(t){n.ws((function(){return(0,r.mG)(s,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return Lc(this)?(dr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Xc.add(4),[4,Ac(e)];case 1:return n.sent(),e.nu.set("Unknown"),e.Xc.delete(4),[4,Tc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.nu=new Ec(n,i)};function Tc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(!Lc(t))return[3,4];e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Ac(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Zc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Nc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e=wr(t),dr("RemoteStore","RemoteStore shutting down."),e.Xc.add(5),[4,Ac(e)];case 1:return n.sent(),e.tu.Di(),e.nu.set("Unknown"),[2]}}))}))}function Sc(t,e){var n=wr(t);n.Yc.has(e.targetId)||(n.Yc.set(e.targetId,e),Pc(n)?xc(n):Wc(n).uc()&&Oc(n,e))}function Dc(t,e){var n=wr(t),r=Wc(n);n.Yc.delete(e),r.uc()&&kc(n,e),0===n.Yc.size&&(r.uc()?r.fc():Lc(n)&&n.nu.set("Unknown"))}function Oc(t,e){t.su.me(e.targetId),Wc(t).bc(e)}function kc(t,e){t.su.me(e),Wc(t).vc(e)}function xc(t){t.su=new Di({qe:function(e){return t.Hc.qe(e)},Ue:function(e){return t.Yc.get(e)||null}}),Wc(t).start(),t.nu.Uc()}function Pc(t){return Lc(t)&&!Wc(t).cc()&&t.Yc.size>0}function Lc(t){return 0===wr(t).Xc.size}function Rc(t){t.su=void 0}function Cc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return t.Yc.forEach((function(e,n){Oc(t,e)})),[2]}))}))}function Vc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){return Rc(t),Pc(t)?(t.nu.Wc(e),xc(t)):t.nu.set("Unknown"),[2]}))}))}function Mc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:if(t.nu.set("Online"),!(e instanceof Ni&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.Yc.has(s)?[4,t.Hc.iu(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.Yc.delete(s),t.su.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),dr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Gc(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ti?t.su.be(e):e instanceof Ai?t.su.ke(e):t.su.De(e),n.isEqual(Gr.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,ec(t.Gc)];case 8:return o=u.sent(),n.h(o)>=0?[4,function(t,e){var n=t.su.$e(e);return n.zt.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Yc.get(r);i&&t.Yc.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Yc.get(e);if(n){t.Yc.set(e,n.it(Nr.u,n.nt)),kc(t,e);var r=new ti(n.target,e,1,n.sequenceNumber);Oc(t,r)}})),t.Hc.ru(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return dr("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,Gc(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function Gc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:if(!ru(e))throw e;return t.Xc.add(1),[4,Ac(t)];case 1:return o.sent(),t.nu.set("Offline"),n||(n=function(){return ec(t.Gc)}),t.hs.Cs((function(){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return dr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Xc.delete(1),[4,Tc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Uc(t,e){return e().catch((function(n){return Gc(t,n,e)}))}function jc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:e=wr(t),n=Xc(e),i=e.Jc.length>0?e.Jc[e.Jc.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Lc(t)&&t.Jc.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,rc(e.Gc,i)];case 3:return null===(o=r.sent())?(0===e.Jc.length&&n.fc(),[3,7]):(i=o.batchId,function(t,e){t.Jc.push(e);var n=Xc(t);n.uc()&&n.Dc&&n.Cc(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Gc(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Fc(e)&&qc(e),[2]}}))}))}function Fc(t){return Lc(t)&&!Xc(t).cc()&&t.Jc.length>0}function qc(t){Xc(t).start()}function Bc(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){return Xc(t).Fc(),[2]}))}))}function zc(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n,i,o;return(0,r.Jh)(this,(function(r){for(e=Xc(t),n=0,i=t.Jc;n<i.length;n++)o=i[n],e.Cc(o.mutations);return[2]}))}))}function Jc(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return i=t.Jc.shift(),o=Cu.from(i,e,n),[4,Uc(t,(function(){return t.Hc.ou(o)}))];case 1:return r.sent(),[4,jc(t)];case 2:return r.sent(),[2]}}))}))}function Hc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return e&&Xc(t).Dc?[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return ni(i=e.code)&&i!==hr.ABORTED?(n=t.Jc.shift(),Xc(t)._c(),[4,Uc(t,(function(){return t.Hc.au(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,jc(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Fc(t)&&qc(t),[2]}}))}))}function Kc(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),e?(n.Xc.delete(2),[4,Tc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Xc.add(2),[4,Ac(n)]);case 3:r.sent(),n.nu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wc(t){var e=this;return t.hu||(t.hu=function(t,e,n){var r=wr(t);return r.Oc(),new bc(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Cc.bind(null,t),Ic:Vc.bind(null,t),yc:Mc.bind(null,t)}),t.Zc.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.hu._c(),Pc(t)?xc(t):t.nu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.hu.stop()];case 2:e.sent(),Rc(t),e.label=3;case 3:return[2]}}))}))}))),t.hu}function Xc(t){var e=this;return t.cu||(t.cu=function(t,e,n){var r=wr(t);return r.Oc(),new wc(e,r.rc,r.credentials,r.serializer,n)}(t.zc,t.hs,{gc:Bc.bind(null,t),Ic:Hc.bind(null,t),xc:zc.bind(null,t),Nc:Jc.bind(null,t)}),t.Zc.push((function(n){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.cu._c(),[4,jc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.cu.stop()];case 3:e.sent(),t.Jc.length>0&&(dr("RemoteStore","Stopping write stream with "+t.Jc.length+" pending writes"),t.Jc=[]),e.label=4;case 4:return[2]}}))}))}))),t.cu}var Yc=function(t){this.key=t},Zc=function(t){this.key=t},Qc=function(){function t(t,e){this.query=t,this.uu=e,this.lu=null,this.te=!1,this._u=yi(),this.Qt=yi(),this.fu=Rs(t),this.du=new bi(this.fu)}return Object.defineProperty(t.prototype,"wu",{get:function(){return this.uu},enumerable:!1,configurable:!0}),t.prototype.Eu=function(t,e){var n=this,r=e?e.Tu:new wi,i=e?e.du:this.du,o=e?e.Qt:this.Qt,s=i,u=!1,a=ws(this.query)&&i.size===this.query.limit?i.last():null,c=Is(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof ds?e:null;f&&(f=Ls(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Ye||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Iu(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.fu(f,a)>0||c&&n.fu(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),ws(this.query)||Is(this.query))for(;s.size>this.query.limit;){var h=ws(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{du:s,Tu:r,mu:u,Qt:o}},t.prototype.Iu=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.Vr=function(t,e,n){var r=this,i=this.du;this.du=t.du,this.Qt=t.Qt;var o=t.Tu.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mr()}};return n(t)-n(e)}(t.type,e.type)||r.fu(t.doc,e.doc)})),this.Au(n);var s=e?this.Ru():[],u=0===this._u.size&&this.te?1:0,a=u!==this.lu;return this.lu=u,0!==o.length||a?{snapshot:new Ii(this.query,t.du,i,o,t.Qt,0===u,a,!1),Pu:s}:{Pu:s}},t.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Vr({du:this.du,Tu:new wi,Qt:this.Qt,mu:!1},!1)):{Pu:[]}},t.prototype.gu=function(t){return!this.uu.has(t)&&!!this.du.has(t)&&!this.du.get(t).Ye},t.prototype.Au=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uu=e.uu.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uu=e.uu.delete(t)})),this.te=t.te)},t.prototype.Ru=function(){var t=this;if(!this.te)return[];var e=this._u;this._u=yi(),this.du.forEach((function(e){t.gu(e.key)&&(t._u=t._u.add(e.key))}));var n=[];return e.forEach((function(e){t._u.has(e)||n.push(new Zc(e))})),this._u.forEach((function(t){e.has(t)||n.push(new Yc(t))})),n},t.prototype.Vu=function(t){this.uu=t.Fh,this._u=yi();var e=this.Eu(t.documents);return this.Vr(e,!0)},t.prototype.yu=function(){return Ii.Gt(this.query,this.du,this.Qt,0===this.lu)},t}(),$c=function(t,e,n){this.query=t,this.targetId=e,this.view=n},th=function(t){this.key=t,this.pu=!1},eh=function(){function t(t,e,n,r,i,o){this.Gc=t,this.bu=e,this.vu=n,this.Su=r,this.currentUser=i,this.Du=o,this.Cu={},this.Nu=new Vr((function(t){return xs(t)}),ks),this.xu=new Map,this.Fu=[],this.ku=new ii(Br.D),this.Ou=new Map,this.Mu=new fc,this.$u={},this.Lu=new Map,this.Bu=ja.da(),this.onlineState="Unknown",this.qu=void 0}return Object.defineProperty(t.prototype,"Uu",{get:function(){return!0===this.qu},enumerable:!1,configurable:!0}),t}();function nh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=Dh(t),(s=n.Nu.get(e))?(i=s.targetId,n.Su.$i(i),o=s.view.yu(),[3,4]):[3,1];case 1:return[4,ic(n.Gc,Ns(e))];case 2:return u=r.sent(),a=n.Su.$i(u.targetId),i=u.targetId,[4,rh(n,e,i,"current"===a)];case 3:o=r.sent(),n.Uu&&Sc(n.bu,u),r.label=4;case 4:return[2,o]}}))}))}function rh(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,u,a,c,h;return(0,r.Jh)(this,(function(f){switch(f.label){case 0:return t.Ku=function(e,n,i){return function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=e.view.Eu(n)).mu?[4,sc(t.Gc,e.query,!1).then((function(t){var n=t.documents;return e.view.Eu(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.zt.get(e.targetId),u=e.view.Vr(o,t.Uu,s),[2,(dh(t,e.targetId,u.Pu),u.snapshot)]}}))}))}(t,e,n,i)},[4,sc(t.Gc,e,!0)];case 1:return o=f.sent(),s=new Qc(e,o.Fh),u=s.Eu(o.documents),a=_i.Zt(n,i&&"Offline"!==t.onlineState),c=s.Vr(u,t.Uu,a),dh(t,n,c.Pu),h=new $c(e,n,s),[2,(t.Nu.set(e,h),t.xu.has(n)?t.xu.get(n).push(e):t.xu.set(n,[e]),c.snapshot)]}}))}))}function ih(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=n.Nu.get(e),(o=n.xu.get(i.targetId)).length>1?[2,(n.xu.set(i.targetId,o.filter((function(t){return!ks(t,e)}))),void n.Nu.delete(e))]:n.Uu?(n.Su.Bi(i.targetId),n.Su.xi(i.targetId)?[3,2]:[4,oc(n.Gc,i.targetId,!1).then((function(){n.Su.Ui(i.targetId),Dc(n.bu,i.targetId),lh(n,i.targetId)})).catch(hc)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return lh(n,i.targetId),[4,oc(n.Gc,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function oh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,nc(n.Gc,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.Ou.get(e);r&&(br(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.pu=!0:t.ne.size>0?br(r.pu):t.se.size>0&&(br(r.pu),r.pu=!1))})),[4,gh(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function sh(t,e,n){var r=wr(t);if(r.Uu&&0===n||!r.Uu&&1===n){var i=[];r.Nu.forEach((function(t,n){var r=n.view.Ks(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=wr(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Ks(e)&&(r=!0)})),r&&wu(n)}(r.vu,e),i.length&&r.Cu.yc(i),r.onlineState=e,r.Uu&&r.Su.ji(e)}}function uh(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(i=wr(t)).Su.Ki(e,"rejected",n),o=i.Ou.get(e),(s=o&&o.key)?(u=(u=new ii(Br.D)).ot(s,new vs(s,Gr.min())),a=yi().add(s),c=new Ei(Gr.min(),new Map,new ui(_r),u,a),[4,oh(i,c)]):[3,2];case 1:return r.sent(),i.ku=i.ku.remove(s),i.Ou.delete(e),yh(i),[3,4];case 2:return[4,oc(i.Gc,e,!1).then((function(){return lh(i,e,n)})).catch(hc)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function ah(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,tc(n.Gc,e)];case 2:return o=r.sent(),fh(n,i,null),hh(n,i),n.Su.Oi(i,"acknowledged"),[4,gh(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ch(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=wr(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.$o(t,e).next((function(e){return br(null!==e),r=e.keys(),n.Sr.Qo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Nh.Or(t,r)}))}))}(i.Gc,e)];case 2:return o=r.sent(),fh(i,e,n),hh(i,e),i.Su.Oi(e,"rejected",n),[4,gh(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,hc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function hh(t,e){(t.Lu.get(e)||[]).forEach((function(t){t.resolve()})),t.Lu.delete(e)}function fh(t,e,n){var r=wr(t),i=r.$u[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$u[r.currentUser.ti()]=i}}function lh(t,e,n){void 0===n&&(n=null),t.Su.Bi(e);for(var r=0,i=t.xu.get(e);r<i.length;r++){var o=i[r];t.Nu.delete(o),n&&t.Cu.Qu(o,n)}t.xu.delete(e),t.Uu&&t.Mu.Kh(e).forEach((function(e){t.Mu.Ho(e)||ph(t,e)}))}function ph(t,e){var n=t.ku.get(e);null!==n&&(Dc(t.bu,n),t.ku=t.ku.remove(e),t.Ou.delete(n),yh(t))}function dh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yc?(t.Mu.Da(o.key,e),vh(t,o)):o instanceof Zc?(dr("SyncEngine","Document no longer in limbo: "+o.key),t.Mu.Na(o.key,e),t.Mu.Ho(o.key)||ph(t,o.key)):mr()}}function vh(t,e){var n=e.key;t.ku.get(n)||(dr("SyncEngine","New document in limbo: "+n),t.Fu.push(n),yh(t))}function yh(t){for(;t.Fu.length>0&&t.ku.size<t.Du;){var e=t.Fu.shift(),n=t.Bu.next();t.Ou.set(n,new th(e)),t.ku=t.ku.ot(e,n),Sc(t.bu,new ti(Ns(bs(e.path)),n,2,_u.ai))}}function gh(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return i=wr(t),o=[],s=[],u=[],i.Nu.P()?[3,3]:(i.Nu.forEach((function(t,r){u.push(i.Ku(r,e,n).then((function(t){if(t){i.Uu&&i.Su.Ki(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=ju.zr(r.targetId,t);s.push(e)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.Cu.yc(o),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,h,f;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return $s.forEach(e,(function(e){return $s.forEach(e.jr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return $s.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ru(i=r.sent()))throw i;return dr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=n.bh.get(a),h=c.nt,f=c.rt(h),n.bh=n.bh.ot(a,f));return[2]}}))}))}(i.Gc,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function mh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return(n=wr(t)).currentUser.isEqual(e)?[3,3]:(dr("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=n.Sr,o=n.Nh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Sr.Uo(t).next((function(s){return r=s,i=n.persistence.Th(e),o=new Uu(n.Ch,i,n.persistence.Ah()),i.Uo(t)})).next((function(e){for(var n=[],i=[],s=yi(),u=0,a=r;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o.Or(t,s).next((function(t){return{Wu:t,ju:n,Gu:i}}))}))}))];case 1:return s=r.sent(),[2,(n.Sr=i,n.Nh=o,n.ph.xh(n.Nh),s)]}}))}))}(n.Gc,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.Lu.forEach((function(t){t.forEach((function(t){t.reject(new fr(hr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lu.clear()}(n),n.Su.Wi(e,i.ju,i.Gu),[4,gh(n,i.Wu)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function bh(t,e){var n=wr(t),r=n.Ou.get(e);if(r&&r.pu)return yi().add(r.key);var i=yi(),o=n.xu.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Nu.get(a);i=i.Ot(c.view.wu)}return i}function wh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,sc((n=wr(t)).Gc,e.query,!0)];case 1:return i=r.sent(),o=e.view.Vu(i),[2,(n.Uu&&dh(n,e.targetId,o.Pu),o)]}}))}))}function Ih(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=wr(t),r=wr(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Nh.Or(t,e):$s.resolve(null)}))}))}((o=wr(t)).Gc,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,jc(o.bu)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(fh(o,e,i||null),hh(o,e),function(t,e){wr(wr(t).Sr).jo(e)}(o.Gc,e)):mr(),r.label=4;case 4:return[4,gh(o,s)];case 5:return r.sent(),[3,7];case 6:dr("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Eh(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,h;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return Dh(n=wr(t)),Oh(n),!0!==e||!0===n.qu?[3,3]:(i=n.Su.Ci(),[4,_h(n,i.L())]);case 1:return o=r.sent(),n.qu=!0,[4,Kc(n.bu,!0)];case 2:for(r.sent(),s=0,u=o;s<u.length;s++)a=u[s],Sc(n.bu,a);return[3,7];case 3:return!1!==e||!1===n.qu?[3,7]:(c=[],h=Promise.resolve(),n.xu.forEach((function(t,e){n.Su.qi(e)?c.push(e):h=h.then((function(){return lh(n,e),oc(n.Gc,e,!0)})),Dc(n.bu,e)})),[4,h]);case 4:return r.sent(),[4,_h(n,c)];case 5:return r.sent(),function(t){var e=wr(t);e.Ou.forEach((function(t,n){Dc(e.bu,n)})),e.Mu.Qh(),e.Ou=new Map,e.ku=new ii(Br.D)}(n),n.qu=!1,[4,Kc(n.bu,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function _h(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a,c,h,f,l,p,d,v,y;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n=wr(t),i=[],o=[],s=0,u=e,r.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(h=n.xu.get(a))&&0!==h.length?[4,ic(n.Gc,Ns(h[0]))]:[3,7]):[3,13];case 2:c=r.sent(),f=0,l=h,r.label=3;case 3:return f<l.length?(p=l[f],d=n.Nu.get(p),[4,wh(n,d)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,uc(n.Gc,a)];case 8:return y=r.sent(),[4,ic(n.Gc,y)];case 9:return c=r.sent(),[4,rh(n,Th(y),a,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Cu.yc(o),i)]}}))}))}function Th(t){return ms(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ah(t){var e=wr(t);return wr(wr(e.Gc).persistence).pi()}function Nh(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(o=wr(t)).qu?(dr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.xu.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ac(o.Gc)];case 3:return s=r.sent(),u=Ei.Xt(e,"current"===n),[4,gh(o,s,u)];case 4:return r.sent(),[3,8];case 5:return[4,oc(o.Gc,e,!0)];case 6:return r.sent(),lh(o,e,i),[3,8];case 7:mr(),r.label=8;case 8:return[2]}}))}))}function Sh(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u,a,c,h,f,l,p;return(0,r.Jh)(this,(function(d){switch(d.label){case 0:if(!(i=Dh(t)).qu)return[3,10];o=0,s=e,d.label=1;case 1:return o<s.length?(u=s[o],i.xu.has(u)?(dr("SyncEngine","Adding an already active target "+u),[3,5]):[4,uc(i.Gc,u)]):[3,6];case 2:return a=d.sent(),[4,ic(i.Gc,a)];case 3:return c=d.sent(),[4,rh(i,Th(a),c.targetId,!1)];case 4:d.sent(),Sc(i.bu,c),d.label=5;case 5:return o++,[3,1];case 6:h=function(t){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return i.xu.has(t)?[4,oc(i.Gc,t,!1).then((function(){Dc(i.bu,t),lh(i,t)})).catch(hc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function Dh(t){var e=wr(t);return e.bu.Hc.ru=oh.bind(null,e),e.bu.Hc.qe=bh.bind(null,e),e.bu.Hc.iu=uh.bind(null,e),e.Cu.yc=mu.bind(null,e.vu),e.Cu.Qu=bu.bind(null,e.vu),e}function Oh(t){var e=wr(t);return e.bu.Hc.ou=ah.bind(null,e),e.bu.Hc.au=ch.bind(null,e),e}var kh=function(){function t(){}return t.prototype.xh=function(t){this.zu=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.W())}(e)||n.isEqual(Gr.min())?this.Hu(t,e):this.zu.Or(t,r).next((function(s){var u=i.Ju(e,s);return(ws(e)||Is(e))&&i.mu(e.an,u,r,n)?i.Hu(t,e):(pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ps(e)),i.zu.Lr(t,e,n).next((function(t){return u.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Ju=function(t,e){var n=new ui(Rs(t));return e.forEach((function(e,r){r instanceof ds&&Ls(t,r)&&(n=n.add(r))})),n},t.prototype.mu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Hu=function(t,e){return pr()<=o.in.DEBUG&&dr("IndexFreeQueryEngine","Using full collection scan to execute query:",Ps(e)),this.zu.Lr(t,e,Gr.min())},t}(),xh=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Yu=1,this.Xu=new ui(lc.Mh)}return t.prototype.ko=function(t){return $s.resolve(0===this.Sr.length)},t.prototype.Oo=function(t,e,n,r){var i=this.Yu;this.Yu++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Ru(i,e,n,r);this.Sr.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Xu=this.Xu.add(new lc(a.key,i)),this.Dr.Mo(t,a.key.path.F())}return $s.resolve(o)},t.prototype.$o=function(t,e){return $s.resolve(this.Zu(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return $s.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return $s.resolve(0===this.Sr.length?-1:this.Yu-1)},t.prototype.Uo=function(t){return $s.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new lc(e,0),i=new lc(e,Number.POSITIVE_INFINITY),o=[];return this.Xu.xt([r,i],(function(t){var e=n.Zu(t.jh);o.push(e)})),$s.resolve(o)},t.prototype.$r=function(t,e){var n=this,r=new ui(_r);return e.forEach((function(t){var e=new lc(t,0),i=new lc(t,Number.POSITIVE_INFINITY);n.Xu.xt([e,i],(function(t){r=r.add(t.jh)}))})),$s.resolve(this.el(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;Br.X(i)||(i=i.child(""));var o=new lc(new Br(i),0),s=new ui(_r);return this.Xu.Ft((function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(s=s.add(t.jh)),!0)}),o),$s.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zu(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;br(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xu;return $s.forEach(e.mutations,(function(i){var o=new lc(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xu=r}))},t.prototype.jo=function(t){},t.prototype.Ho=function(t,e){var n=new lc(e,0),r=this.Xu.kt(n);return $s.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,$s.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zu=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),Ph=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new ii(Br.D),this.size=0}return t.prototype.Ir=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.F())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return $s.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=fi();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),$s.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=pi(),i=new Br(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),u=s.key,a=s.value,c=a.ta,h=a.readTime;if(!e.path.M(u.path))break;h.h(n)<=0||c instanceof ds&&Ls(e,c)&&(r=r.ot(c.key,c))}return $s.resolve(r)},t.prototype.il=function(t,e){return $s.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Lh(this)},t.prototype.aa=function(t){return $s.resolve(this.size)},t}(),Lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).ha=e,n}return(0,r.ZT)(e,t),e.prototype.Vr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ha.Ir(t,i,e.readTime)):e.ha.Ar(r)})),$s.kn(n)},e.prototype.Pr=function(t,e){return this.ha.Rr(t,e)},e.prototype.gr=function(t,e){return this.ha.getEntries(t,e)},e}(Vu),Rh=function(){function t(t){this.persistence=t,this.rl=new Vr((function(t){return Xr(t)}),Yr),this.lastRemoteSnapshotVersion=Gr.min(),this.highestTargetId=0,this.ol=0,this.al=new fc,this.targetCount=0,this.hl=ja.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),$s.resolve()},t.prototype.Ia=function(t){return $s.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ma=function(t){return $s.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.hl.next(),$s.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),$s.resolve()},t.prototype.Pa=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new ja(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.Pa(e),this.targetCount+=1,$s.resolve()},t.prototype.Va=function(t,e){return this.Pa(e),$s.resolve()},t.prototype.ya=function(t,e){return this.rl.delete(e.target),this.al.Kh(e.targetId),this.targetCount-=1,$s.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.rl.delete(s),o.push(r.pa(t,u.targetId)),i++)})),$s.kn(o).next((function(){return i}))},t.prototype.ba=function(t){return $s.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return $s.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Bh(e,n),$s.resolve()},t.prototype.Ca=function(t,e,n){this.al.Uh(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),$s.kn(i)},t.prototype.pa=function(t,e){return this.al.Kh(e),$s.resolve()},t.prototype.xa=function(t,e){var n=this.al.Wh(e);return $s.resolve(n)},t.prototype.Ho=function(t,e){return $s.resolve(this.al.Ho(e))},t}(),Ch=function(){function t(t){var e=this;this.cl={},this.Ma=new _u(0),this.$a=!1,this.$a=!0,this.No=t(this),this.ja=new Rh(this),this.Dr=new ba,this.vr=function(t,n){return new Ph(t,(function(t){return e.No.ul(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.$a=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.th=function(){},t.prototype.Ah=function(){return this.Dr},t.prototype.Th=function(t){var e=this.cl[t.ti()];return e||(e=new xh(this.Dr,this.No),this.cl[t.ti()]=e),e},t.prototype.Ih=function(){return this.ja},t.prototype.mh=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;dr("MemoryPersistence","Starting transaction:",t);var i=new Vh(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).xn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return $s.On(Object.values(this.cl).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fa=e,n}return(0,r.ZT)(e,t),e}(Gu),Mh=function(){function t(t){this.persistence=t,this.dl=new fc,this.wl=null}return t.El=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw mr()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),$s.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),$s.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),$s.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Kh(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Ih();return r.xa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.ya(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.mh().ra();return $s.forEach(this.Tl,(function(r){var i=Br.H(r);return e.Il(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yh=function(t,e){var n=this;return this.Il(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.ul=function(t){return 0},t.prototype.Il=function(t,e){var n=this;return $s.On([function(){return $s.resolve(n.dl.Ho(e))},function(){return n.persistence.Ih().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),Gh=function(){function t(t){this.ml=t.ml,this.Al=t.Al}return t.prototype.gc=function(t){this.Rl=t},t.prototype.Ic=function(t){this.Pl=t},t.prototype.onMessage=function(t){this.gl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.ml(t)},t.prototype.Vl=function(){this.Rl()},t.prototype.yl=function(t){this.Pl(t)},t.prototype.pl=function(t){this.gl(t)},t}(),Uh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.T=e.T,n}return(0,r.ZT)(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var s=new ar;s.listenOnce(sr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case or.NO_ERROR:var e=s.getResponseJson();dr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:dr("Connection",'RPC "'+t+'" timed out'),o(new fr(hr.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=s.getStatus();if(dr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(hr).indexOf(e)>=0?e:hr.UNKNOWN}(r.status);o(new fr(u,r.message))}else o(new fr(hr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fr(hr.UNAVAILABLE,"Connection failed."));break;default:mr()}}finally{dr("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Vc=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.Cl(i.initMessageHeaders,e),(0,s.uI)()||(0,s.b$)()||(0,s.d)()||(0,s.w1)()||(0,s.Mn)()||(0,s.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");dr("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),a=!1,c=!1,h=new Gh({ml:function(t){c?dr("Connection","Not sending because WebChannel is closed:",t):(a||(dr("Connection","Opening WebChannel transport."),u.open(),a=!0),dr("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(ur.EventType.OPEN,(function(){c||dr("Connection","WebChannel transport opened.")})),f(ur.EventType.CLOSE,(function(){c||(c=!0,dr("Connection","WebChannel transport closed"),h.yl())})),f(ur.EventType.ERROR,(function(t){c||(c=!0,yr("Connection","WebChannel transport errored:",t),h.yl(new fr(hr.UNAVAILABLE,"The operation could not be completed")))})),f(ur.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];br(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){dr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Qr[t];if(void 0!==e)return ri(e)}(o),a=i.message;void 0===s&&(s=hr.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.yl(new fr(s,a)),u.close()}else dr("Connection","WebChannel received:",n),h.pl(n)}})),setTimeout((function(){h.Vl()}),0),h},e}(function(){function t(t){this.bl=t,this._=t._;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}return t.prototype.Mc=function(t,e,n,r){var i=this.Dl(t,e);dr("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return dr("RestConnection","Received: ",t),t}),(function(e){throw yr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$c=function(t,e,n,r){return this.Mc(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.0",t["Content-Type"]="text/plain",e)for(var n in e.Gh)e.Gh.hasOwnProperty(n)&&(t[n]=e.Gh[n])},t.prototype.Dl=function(t,e){var n=Uh[t];return this.vl+"/v1/"+e+":"+n},t}()),Fh=function(){function t(){var t=this;this.xl=function(){return t.Fl()},this.kl=function(){return t.Ol()},this.Ml=[],this.$l()}return t.prototype.eu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.kl)},t.prototype.$l=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.kl)},t.prototype.Fl=function(){dr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.Ol=function(){dr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qh=function(){function t(){}return t.prototype.eu=function(t){},t.prototype.Di=function(){},t}();function Bh(t){return new $i(t,!0)}var zh=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return this.Su=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.Gc=this.Kl(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Kl=function(t){return e=this.persistence,n=new kh,r=t.Ql,new $a(e,n,r);var e,n,r},t.prototype.Bl=function(t){return new Ch(Mh.El)},t.prototype.Ll=function(t){return new Lu},t.prototype.terminate=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Su.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t}(),Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,cc(this.Gc)];case 2:return n.sent(),[4,this.Wl.initialize(this,e)];case 3:return n.sent(),[4,Oh(this.Wl.fi)];case 4:return n.sent(),[4,jc(this.Wl.bu)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Ju(e,t.hs)},e.prototype.Bl=function(t){var e=Qa(t.bl._,t.bl.persistenceKey),n=void 0!==this.cacheSizeBytes?zu.ao(this.cacheSizeBytes):zu.fo,r=Bh(t.bl._);return new Ka(this.synchronizeTabs,e,t.clientId,n,t.hs,cu(),hu(),r,this.Su,!!this.forceOwnership)},e.prototype.Ll=function(t){return new Lu},e}(zh),Hh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Wl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,r.ZT)(e,t),e.prototype.initialize=function(e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Wl.fi,this.Su instanceof Pu?(this.Su.fi={er:Ih.bind(null,n),nr:Nh.bind(null,n),sr:Sh.bind(null,n),pi:Ah.bind(null,n)},[4,this.Su.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(t){return(0,r.mG)(i,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,Eh(this.Wl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ii?this.ql.start(this.Gc):t||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Ll=function(t){var e=cu();if(!Pu.Ln(e))throw new fr(hr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qa(t.bl._,t.bl.persistenceKey);return new Pu(e,t.hs,n,t.clientId,t.Ql)},e}(Jh),Kh=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.Gc?[3,2]:(this.Gc=t.Gc,this.Su=t.Su,this.zc=this.jl(e),this.bu=this.Gl(e),this.vu=this.zl(e),this.fi=this.Hl(e,!t.synchronizeTabs),this.Su.di=function(t){return sh(n.fi,t,1)},this.bu.Hc.Jl=mh.bind(null,this.fi),[4,Kc(this.bu,this.fi.Uu)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.zl=function(t){return new vu},t.prototype.jl=function(t){var e,n=Bh(t.bl._),r=(e=t.bl,new jh(e));return function(t,e,n){return new Ic(t,e,n)}(t.credentials,r,n)},t.prototype.Gl=function(t){var e,n,r,i,o,s=this;return e=this.Gc,n=this.zc,r=t.hs,i=function(t){return sh(s.fi,t,0)},o=Fh.Ln()?new Fh:new qh,new _c(e,n,r,i,o)},t.prototype.Hl=function(t,e){return function(t,e,n,r,i,o,s){var u=new eh(t,e,n,r,i,o);return s&&(u.qu=!0),u}(this.Gc,this.bu,this.vu,this.Su,t.Ql,t.Du,e)},t.prototype.terminate=function(){return Nc(this.bu)},t}(),Wh=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xl=function(){this.muted=!0},t.prototype.Yl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Xh(t,e,n){if(!n)throw new fr(hr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Yh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fr(hr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zh(t,e,n,r){if(!0===e&&!0===r)throw new fr(hr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Qh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":mr()}function $h(t,e){if(e<=0)throw new fr(hr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var tf=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new fr(hr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new qr(t)},ef=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return(0,r.ZT)(e,t),e.documentId=function(){return new e(qr.j().B())},e.prototype.isEqual=function(t){return t instanceof e&&this.Zl.isEqual(t.Zl)},e}(tf),nf=new RegExp("[~\\*/\\[\\]]"),rf=function(t){this.t_=t},of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(rf);function sf(t,e,n){return new mf({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var uf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.e_=function(t){return new Ho(t.path,new Mo)},e.prototype.isEqual=function(t){return t instanceof e},e}(rf),af=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=sf(this,t,!0),n=this.o_.map((function(t){return Tf(t,e)})),r=new Go(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rf),cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).o_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=sf(this,t,!0),n=this.o_.map((function(t){return Tf(t,e)})),r=new jo(n);return new Ho(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(rf),hf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return(0,r.ZT)(e,t),e.prototype.e_=function(t){var e=new qo(t.serializer,no(t.serializer,this.a_));return new Ho(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(rf),ff=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fr(hr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fr(hr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.h_=t,this.c_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.h_===t.h_&&this.c_===t.c_},t.prototype.toJSON=function(){return{latitude:this.h_,longitude:this.c_}},t.prototype.g=function(t){return _r(this.h_,t.h_)||_r(this.c_,t.c_)},t}(),lf=function(t){this.u_=t},pf=/^__.*__$/,df=function(t,e,n){this.l_=t,this.__=e,this.f_=n},vf=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new rs(t,this.data,this.Qe,e)):n.push(new ns(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new os(t,this.fieldTransforms)),n},t}(),yf=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.d_=function(t,e){var n=[new rs(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new os(t,this.fieldTransforms)),n},t}();function gf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mr()}}var mf=function(){function t(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),t.prototype.E_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.T_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.I_(t),r},t.prototype.m_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.E_({path:n,r_:!1});return r.w_(),r},t.prototype.A_=function(t){return this.E_({path:void 0,r_:!0})},t.prototype.s_=function(t){return kf(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.M(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.M(e.field)}))},t.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(gf(this.n_)&&pf.test(t))throw this.s_('Document fields cannot begin and end with "__"')},t}(),bf=function(){function t(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||Bh(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new mf({n_:t,methodName:e,i_:n,path:qr.U(),r_:!1,R_:r},this._,this.serializer,this.ignoreUndefinedProperties)},t}();function wf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Sf("Data must be an object, but it was:",s,r);var u,a,c=Af(r,s);if(o.merge)u=new Jo(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=l[f],d=void 0;if(p instanceof tf)d=p.Zl;else{if("string"!=typeof p)throw mr();d=Of(e,p,n)}if(!s.contains(d))throw new fr(hr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");xf(h,d)||h.push(d)}u=new Jo(h),a=s.fieldTransforms.filter((function(t){return u.Je(t.field)}))}else u=null,a=s.fieldTransforms;return new vf(new hs(c),u,a)}function If(t,e,n,r){var i=t.P_(1,e,n);Sf("Data must be an object, but it was:",i,r);var o=[],s=new fs;Rr(r,(function(t,r){var u=Of(e,t,n),a=i.m_(u);if(r instanceof of||r instanceof lf&&r.u_ instanceof of)o.push(u);else{var c=Tf(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Jo(o);return new yf(s.Xe(),u,i.fieldTransforms)}function Ef(t,e,n,r,i,o){var s=t.P_(1,e,n),u=[Df(e,r,n)],a=[i];if(o.length%2!=0)throw new fr(hr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Df(e,o[c])),a.push(o[c+1]);for(var h=[],f=new fs,l=u.length-1;l>=0;--l)if(!xf(h,u[l])){var p=u[l],d=a[l],v=s.m_(p);if(d instanceof of||d instanceof lf&&d.u_ instanceof of)h.push(p);else{var y=Tf(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new Jo(h);return new yf(f.Xe(),g,s.fieldTransforms)}function _f(t,e,n,r){return void 0===r&&(r=!1),Tf(n,t.P_(r?4:3,e))}function Tf(t,e){if(t instanceof lf&&(t=t.u_),Nf(t))return Sf("Unsupported field value:",e,t),Af(t,e);if(t instanceof rf)return function(t,e){if(!gf(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");var n=t.e_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.r_&&4!==e.n_)throw e.s_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Tf(o[i],e.A_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return no(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Mr.fromDate(t);return{timestampValue:ro(e.serializer,n)}}if(t instanceof Mr){var r=new Mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ro(e.serializer,r)}}if(t instanceof ff)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sr)return{bytesValue:io(e.serializer,t.l)};if(t instanceof df){var i=e._,o=t.l_;if(!o.isEqual(i))throw e.s_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:uo(t.l_||e._,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+Qh(t))}(t,e)}function Af(t,e){var n={};return Cr(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):Rr(t,(function(t,r){var i=Tf(r,e.T_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Nf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Mr||t instanceof ff||t instanceof Sr||t instanceof df||t instanceof rf)}function Sf(t,e,n){if(!Nf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Qh(n);throw"an object"===r?e.s_(t+" a custom object"):e.s_(t+" "+r)}}function Df(t,e,n){if(e instanceof tf)return e.Zl;if("string"==typeof e)return Of(t,e);throw kf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Of(t,e,n){try{return function(t){if(t.search(nf)>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ef.bind.apply(ef,(0,r.pr)([void 0],t.split("."))))}catch(e){throw new fr(hr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw kf((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function kf(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new fr(hr.INVALID_ARGUMENT,(u+=". ")+t+a)}function xf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Pf=function(){function t(t){this.zc=t,this.g_=new Map,this.mutations=[],this.V_=!1,this.y_=null,this.p_=new Set}return t.prototype.b_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:if(this.v_(),this.mutations.length>0)throw new fr(hr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=po(n.serializer)+"/documents",o={documents:e.map((function(t){return co(n.serializer,t)}))},[4,n.$c("BatchGetDocuments",i,o)];case 1:return s=r.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){br(!!e.found),e.found.name,e.found.updateTime;var n=ho(t,e.found.name),r=so(e.found.updateTime),i=new hs({mapValue:{fields:e.found.fields}});return new ds(n,r,i,{})}(t,e):"missing"in e?function(t,e){br(!!e.missing),br(!!e.readTime);var n=ho(t,e.missing),r=so(e.readTime);return new vs(n,r)}(t,e):mr()}(n.serializer,t);u.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=u.get(t.toString());br(!!e),a.push(e)})),a)]}}))}))}(this.zc,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof vs||t instanceof ds?n.S_(t):mr()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.d_(t,this.Ge(t))),this.p_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.y_=t}this.p_.add(t.toString())},t.prototype.delete=function(t){this.write([new as(t,this.Ge(t))]),this.p_.add(t.toString())},t.prototype.commit=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:if(this.v_(),this.y_)throw this.y_;return t=this.g_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Br.H(n);e.mutations.push(new cs(r,e.Ge(r)))})),[4,function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return n=wr(t),i=po(n.serializer)+"/documents",o={writes:e.map((function(t){return go(n.serializer,t)}))},[4,n.Mc("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.zc,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.S_=function(t){var e;if(t instanceof ds)e=t.version;else{if(!(t instanceof vs))throw mr();e=Gr.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fr(hr.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?Wo.updateTime(e):Wo.ze()},t.prototype.D_=function(t){var e=this.g_.get(t.toString());if(!this.p_.has(t.toString())&&e){if(e.isEqual(Gr.min()))throw new fr(hr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wo.updateTime(e)}return Wo.exists(!0)},t.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},t.prototype.v_=function(){},t}(),Lf=function(){function t(t,e,n,r){this.hs=t,this.zc=e,this.updateFunction=n,this.ls=r,this.C_=5,this.Vs=new Qs(this.hs,"transaction_retry")}return t.prototype.run=function(){this.N_()},t.prototype.N_=function(){var t=this;this.Vs.Pn((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,r.Jh)(this,(function(r){return t=new Pf(this.zc),(e=this.x_(t))&&e.then((function(e){n.hs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.F_(t)}))}))})).catch((function(t){n.F_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!zr(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.F_=function(t){var e=this;this.C_>0&&this.k_(t)?(this.C_-=1,this.hs.ws((function(){return e.N_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.k_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ni(e)}return!1},t}(),Rf=function(){function t(t,e){this.credentials=t,this.hs=e,this.clientId=Er.t(),this.O_=new Zs}return t.prototype.start=function(t,e,n){var i=this;this.M_(),this.bl=t;var o=new Zs,s=!1;return this.credentials.Jh((function(t){if(!s)return s=!0,dr("FirestoreClient","Initializing. user=",t.uid),i.L_(e,n,t,o).then(i.O_.resolve,i.O_.reject);i.hs.Cs((function(){return function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return(n=wr(t)).hs.Fs(),dr("RemoteStore","RemoteStore received new credentials"),i=Lc(n),n.Xc.add(3),[4,Ac(n)];case 1:return r.sent(),i&&n.nu.set("Unknown"),[4,n.Hc.Jl(e)];case 2:return r.sent(),n.Xc.delete(3),[4,Tc(n)];case 3:return r.sent(),[2]}}))}))}(i.bu,t)}))})),this.hs.ws((function(){return i.O_.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!0),function(t){var e=wr(t);return e.Xc.delete(0),Tc(e)}(t.bu)}))},t.prototype.L_=function(t,e,n,i){return(0,r.mG)(this,void 0,void 0,(function(){var o,s,u=this;return(0,r.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),o={hs:this.hs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Ql:n,Du:100},[4,t.initialize(o)];case 1:return a.sent(),[4,e.initialize(t,o)];case 2:return a.sent(),this.persistence=t.persistence,this.Su=t.Su,this.Gc=t.Gc,this.ql=t.ql,this.zc=e.zc,this.bu=e.bu,this.fi=e.fi,this.B_=e.vu,this.B_.Us=nh.bind(null,this.fi),this.B_.Ws=ih.bind(null,this.fi),this.persistence.Za((function(){return(0,r.mG)(u,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(s=a.sent(),i.reject(s),!function(t){return"FirebaseError"===t.name?t.code===hr.FAILED_PRECONDITION||t.code===hr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.L_(new zh,new Kh,n,i))];case 4:return[2]}}))}))},t.prototype.M_=function(){if(this.hs.ps)throw new fr(hr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue((function(){return t.persistence.th(!1),function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return(e=wr(t)).Xc.add(0),[4,Ac(e)];case 1:return n.sent(),e.nu.set("Offline"),[2]}}))}))}(t.bu)}))},t.prototype.terminate=function(){var t=this;this.hs.Ds();var e=new Zs;return this.hs.bs((function(){return(0,r.mG)(t,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Nc(this.bu)];case 1:return r.sent(),[4,this.Su.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=pu(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.M_();var e=new Zs;return this.hs.ws((function(){return function(t,e){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,o,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:Lc((n=wr(t)).bu)||dr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=wr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.Gc)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lu.get(i)||[]).push(e),n.Lu.set(i,o),[3,4]);case 3:return s=r.sent(),u=pu(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(u),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.M_();var i=new Wh(n),o=new Iu(t,i,e);return this.hs.ws((function(){return yu(r.B_,o)})),function(){i.Xl(),r.hs.ws((function(){return gu(r.B_,o)}))}},t.prototype.q_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),e=new Zs,[2,(this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Nh.Cr(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof ds?n.resolve(i):i instanceof vs?n.resolve(null):n.reject(new fr(hr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),s=pu(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.U_=function(t,e){return void 0===e&&(e={}),(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),n=new Zs,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wh({next:function(o){e.ws((function(){return gu(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new fr(hr.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new fr(hr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Iu(bs(n.path),o,{includeMetadataChanges:!0,Xs:!0});return yu(t,s)}(i.B_,i.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.K_=function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return i.sent(),e=new Zs,[2,(this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,sc(t,e,!0)];case 1:return i=r.sent(),o=new Qc(e,i.Fh),s=o.Eu(i.documents),u=o.Vr(s,!1),n.resolve(u.snapshot),[3,3];case 2:return a=r.sent(),c=pu(a,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.Gc,t,e)})),e.promise)]}}))}))},t.prototype.Q_=function(t,e){return void 0===e&&(e={}),(0,r.mG)(this,void 0,void 0,(function(){var n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return r.sent(),n=new Zs,[2,(this.hs.ws((function(){return function(t,e,n,r,i){var o=new Wh({next:function(n){e.ws((function(){return gu(t,s)})),n.fromCache&&"server"===r.source?i.reject(new fr(hr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Iu(n,o,{includeMetadataChanges:!0,Xs:!0});return yu(t,s)}(i.B_,i.hs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.M_();var n=new Zs;return this.hs.ws((function(){return function(t,e,n){return(0,r.mG)(this,void 0,void 0,(function(){var i,o,s,u;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:i=Oh(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=wr(t),i=Mr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),yi());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Nh.Or(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=$o(c,n.get(c.key));null!=h&&s.push(new rs(c.key,h,ls(h.proto.mapValue),Wo.exists(!0)))}return r.Sr.Oo(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.Gc,e)];case 2:return o=r.sent(),i.Su.Fi(o.batchId),function(t,e,n){var r=t.$u[t.currentUser.ti()];r||(r=new ii(_r)),r=r.ot(e,n),t.$u[t.currentUser.ti()]=r}(i,o.batchId,n),[4,gh(i,o.wr)];case 3:return r.sent(),[4,jc(i.bu)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),u=pu(s,"Failed to persist write"),n.reject(u),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype._=function(){return this.bl._},t.prototype.W_=function(t){var e=this;this.M_();var n=new Wh(t);return this.hs.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,function(t,e){wr(t).qs.add(e),e.next()}(this.B_,n)]}))}))})),function(){n.Xl(),e.hs.ws((function(){return(0,r.mG)(e,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){return[2,function(t,e){wr(t).qs.delete(e)}(this.B_,n)]}))}))}))}},Object.defineProperty(t.prototype,"j_",{get:function(){return this.hs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.M_();var n=new Zs;return this.hs.ws((function(){return new Lf(e.hs,e.zc,t,n).run(),Promise.resolve()})),n.promise},t}();function Cf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Vf=function(){function t(t,e,n,r){this._=t,this.G_=e,this.z_=n,this.H_=r}return t.prototype.J_=function(t){switch(Ci(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bi(t.integerValue||t.doubleValue);case 3:return this.Y_(t.timestampValue);case 4:return this.X_(t);case 5:return t.stringValue;case 6:return this.H_(zi(t.bytesValue));case 7:return this.Z_(t.referenceValue);case 8:return this.tf(t.geoPointValue);case 9:return this.ef(t.arrayValue);case 10:return this.nf(t.mapValue);default:throw mr()}},t.prototype.nf=function(t){var e=this,n={};return Rr(t.fields||{},(function(t,r){n[t]=e.J_(r)})),n},t.prototype.tf=function(t){return new ff(Bi(t.latitude),Bi(t.longitude))},t.prototype.ef=function(t){var e=this;return(t.values||[]).map((function(t){return e.J_(t)}))},t.prototype.X_=function(t){switch(this.G_){case"previous":var e=Pi(t);return null==e?null:this.J_(e);case"estimate":return this.Y_(Li(t));default:return null}},t.prototype.Y_=function(t){var e=qi(t);return new Mr(e.seconds,e.nanos)},t.prototype.Z_=function(t){var e=jr.q(t);br(Po(e));var n=new Pr(e.get(1),e.get(3)),r=new Br(e.N(5));return n.isEqual(this._)||vr("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.z_(r)},t}(),Mf=zu.uo,Gf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fr(hr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=zu._o;else{if(t.cacheSizeBytes!==Mf&&t.cacheSizeBytes<zu.lo)throw new fr(hr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+zu.lo);this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Uf="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",jf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){throw new fr(hr.FAILED_PRECONDITION,Uf)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new fr(hr.FAILED_PRECONDITION,Uf)},t.prototype.clearIndexedDbPersistence=function(t){throw new fr(hr.FAILED_PRECONDITION,Uf)},t}(),Ff=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){var n=new Kh,r=new Jh(n,t.sf().cacheSizeBytes,e);return t.if(r,n)},t.prototype.enableMultiTabIndexedDbPersistence=function(t){var e=new Kh,n=new Hh(e,t.sf().cacheSizeBytes);return t.if(n,e)},t.prototype.clearIndexedDbPersistence=function(t){var e=this,n=new Zs;return t.rf.bs((function(){return(0,r.mG)(e,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return tu.Ln()?(e=t+"main",[4,tu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Qa(t.l_,t.af))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},t}(),qf=function(){function t(e,n,i){var o=this;if(void 0===i&&(i=new jf),this.hf=i,this.cf=null,this.rf=new lu,this.INTERNAL={delete:function(){return(0,r.mG)(o,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return this.uf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.cf=s,this.l_=t._f(s),this.af=s.name,this.ff=new vc(n)}else{var u=e;if(!u.projectId)throw new fr(hr.INVALID_ARGUMENT,"Must provide projectId");this.l_=new Pr(u.projectId,u.database),this.af="[DEFAULT]",this.ff=new dc}this.df=new Gf({})}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.Ef||(this.Ef=new bf(this.l_,this.df.ignoreUndefinedProperties)),this.Ef},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;var e=new Gf(t);if(this.lf&&!this.df.isEqual(e))throw new fr(hr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.df=e,void 0!==e.credentials&&(this.ff=function(t){if(!t)return new dc;switch(t.type){case"gapi":var e=t.client;return br(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new gc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new fr(hr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.df.host&&yr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},t.prototype.enableNetwork=function(){return this.uf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.uf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.lf)throw new fr(hr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&Zh("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.hf.enableMultiTabIndexedDbPersistence(this):this.hf.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return(0,r.mG)(this,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){if(void 0!==this.lf&&!this.lf.j_)throw new fr(hr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return[2,this.hf.clearIndexedDbPersistence(this)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Tf",{get:function(){return this.uf(),this.lf.j_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.uf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.uf(),Cf(t))return this.lf.W_(t);var e={next:t};return this.lf.W_(e)},t.prototype.uf=function(){return this.lf||this.if(new zh,new Kh),this.lf},t.prototype.If=function(){return new xr(this.l_,this.af,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling,this.df.experimentalAutoDetectLongPolling)},t.prototype.if=function(t,e){var n=this.If();return this.lf=new Rf(this.ff,this.rf),this.lf.start(n,t,e)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new fr(hr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new fr(hr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Pr(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new fr(hr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Xh("Firestore.collection","path",t),this.uf(),new el(jr.q(t),this,null)},t.prototype.doc=function(t){return Xh("Firestore.doc","path",t),this.uf(),Jf.mf(jr.q(t),this,null)},t.prototype.collectionGroup=function(t){if(Xh("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new $f(function(t){return new gs(jr.U(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return this.uf().transaction((function(n){return t(new Bf(e,n))}))},t.prototype.batch=function(){return this.uf(),new zf(this)},t.prototype.sf=function(){return this.df},t}(),Bf=function(){function t(t,e){this.Af=t,this.Rf=e}return t.prototype.get=function(t){var e=this,n=nl(0,t,this.Af);return this.Rf.b_([n.__]).then((function(t){if(!t||1!==t.length)return mr();var r=t[0];if(r instanceof vs)return new Kf(e.Af,n.__,null,!1,!1,n.f_);if(r instanceof ds)return new Kf(e.Af,n.__,r,!1,!1,n.f_);throw mr()}))},t.prototype.set=function(t,e,n){var r=nl(0,t,this.Af);n=Yh("Transaction.set",n);var i=il(r.f_,e,n),o=wf(this.Af.wf,"Transaction.set",r.__,i,null!==r.f_,n);return this.Rf.set(r.__,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ef?(r=nl(0,t,this.Af),i=Ef(this.Af.wf,"Transaction.update",r.__,e,n,o)):(r=nl(0,t,this.Af),i=If(this.Af.wf,"Transaction.update",r.__,e)),this.Rf.update(r.__,i),this},t.prototype.delete=function(t){var e=nl(0,t,this.Af);return this.Rf.delete(e.__),this},t}(),zf=function(){function t(t){this.Af=t,this.Pf=[],this.gf=!1}return t.prototype.set=function(t,e,n){this.Vf();var r=nl(0,t,this.Af);n=Yh("WriteBatch.set",n);var i=il(r.f_,e,n),o=wf(this.Af.wf,"WriteBatch.set",r.__,i,null!==r.f_,n);return this.Pf=this.Pf.concat(o.d_(r.__,Wo.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Vf(),"string"==typeof e||e instanceof ef?(r=nl(0,t,this.Af),i=Ef(this.Af.wf,"WriteBatch.update",r.__,e,n,o)):(r=nl(0,t,this.Af),i=If(this.Af.wf,"WriteBatch.update",r.__,e)),this.Pf=this.Pf.concat(i.d_(r.__,Wo.exists(!0))),this},t.prototype.delete=function(t){this.Vf();var e=nl(0,t,this.Af);return this.Pf=this.Pf.concat(new as(e.__,Wo.ze())),this},t.prototype.commit=function(){return this.Vf(),this.gf=!0,this.Pf.length>0?this.Af.uf().write(this.Pf):Promise.resolve()},t.prototype.Vf=function(){if(this.gf)throw new fr(hr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.l_,e,r)||this).__=e,i.firestore=n,i.f_=r,i.lf=i.firestore.uf(),i}return(0,r.ZT)(e,t),e.mf=function(t,n,r){if(t.length%2!=0)throw new fr(hr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new e(new Br(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new el(this.__.path.F(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.__.path.B()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Xh("DocumentReference.collection","path",t),!t)throw new fr(hr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=jr.q(t);return new el(this.__.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof e&&this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},e.prototype.set=function(t,e){e=Yh("DocumentReference.set",e);var n=il(this.f_,t,e),r=wf(this.firestore.wf,"DocumentReference.set",this.__,n,null!==this.f_,e);return this.lf.write(r.d_(this.__,Wo.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof ef?Ef(this.firestore.wf,"DocumentReference.update",this.__,t,e,r):If(this.firestore.wf,"DocumentReference.update",this.__,t),this.lf.write(n.d_(this.__,Wo.exists(!0)))},e.prototype.delete=function(){return this.lf.write([new as(this.__,Wo.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Cf(i[u])||(s=i[u],u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(Cf(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}var h={next:function(t){i[u]&&i[u](r.yf(t))},error:i[u+1],complete:i[u+2]};return this.lf.listen(bs(this.__.path),a,h)},e.prototype.get=function(t){var e=this,n=this.firestore.uf();return t&&"cache"===t.source?n.q_(this.__).then((function(t){return new Kf(e.firestore,e.__,t,!0,t instanceof ds&&t.Ye,e.f_)})):n.U_(this.__,t).then((function(t){return e.yf(t)}))},e.prototype.withConverter=function(t){return new e(this.__,this.firestore,t)},e.prototype.yf=function(t){var e=t.docs.get(this.__);return new Kf(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},e}(df),Hf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Kf=function(){function t(t,e,n,r,i,o){this.Af=t,this.__=e,this.pf=n,this.bf=r,this.vf=i,this.f_=o}return t.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.pf){if(this.f_){var n=new Wf(this.Af,this.__,this.pf,this.bf,this.vf,null);return this.f_.fromFirestore(n,t)}return new Vf(this.Af.l_,t.serverTimestamps||"none",(function(t){return new Jf(t,e.Af,null)}),(function(t){return new kr(t)})).J_(this.pf.rn())}},t.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.pf){var r=this.pf.data().field(Df("DocumentSnapshot.get",t,this.__));if(null!==r)return new Vf(this.Af.l_,e.serverTimestamps||"none",(function(t){return new Jf(t,n.Af,n.f_)}),(function(t){return new kr(t)})).J_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Jf(this.__,this.Af,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.pf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Hf(this.vf,this.bf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&this.bf===e.bf&&this.__.isEqual(e.__)&&(null===this.pf?null===e.pf:this.pf.isEqual(e.pf))&&this.f_===e.f_},t}(),Wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Kf);function Xf(t,e,n){if("string"==typeof n){if(""===n)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ts(e)&&-1!==n.indexOf("/"))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(jr.q(n));if(!Br.X(r))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ji(t,new Br(r))}if(n instanceof df)return Ji(t,n.__);throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Qh(n)+".")}function Yf(t,e){if(!Array.isArray(t)||0===t.length)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Zf(t,e,n){if(!n.isEqual(e))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Qf(t){if(Is(t)&&0===t.on.length)throw new fr(hr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $f=function(){function t(t,e,n){this.Sf=t,this.firestore=e,this.f_=n}return t.prototype.where=function(e,n,r){var i=Df("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.W()){if("array-contains"===o||"array-contains-any"===o)throw new fr(hr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yf(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(Xf(r,t,f))}u={arrayValue:{values:a}}}else u=Xf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yf(s,o),u=_f(n,"Query.where",s,"in"===o||"not-in"===o);var l=Cs.create(i,o,u);return function(t,e){if(e.un()){var n=_s(t);if(null!==n&&!n.isEqual(e.field))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Es(t);null!==r&&Zf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new fr(hr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new fr(hr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.Sf,0,this.firestore.wf,this.firestore.l_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new gs(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new fr(hr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Df("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ws(e,n);return function(t,e){if(null===Es(t)){var n=_s(t);null!==n&&Zf(0,n,e.field)}}(t,r),r}(this.Sf,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new gs(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Sf,o),this.firestore,this.f_)},t.prototype.limit=function(e){return $h("Query.limit",e),new t(Ss(this.Sf,e,"F"),this.firestore,this.f_)},t.prototype.limitToLast=function(e){return $h("Query.limitToLast",e),new t(Ss(this.Sf,e,"L"),this.firestore,this.f_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAt",e,n,!0);return new t(Ds(this.Sf,i),this.firestore,this.f_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.startAfter",e,n,!1);return new t(Ds(this.Sf,i),this.firestore,this.f_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endBefore",e,n,!0);return new t(Os(this.Sf,i),this.firestore,this.f_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Df("Query.endAt",e,n,!1);return new t(Os(this.Sf,i),this.firestore,this.f_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&ks(this.Sf,e.Sf)&&this.f_===e.f_},t.prototype.withConverter=function(e){return new t(this.Sf,this.firestore,e)},t.prototype.Df=function(t,e,n,r){if(e instanceof Kf)return function(t,e,n,r,i){if(!r)throw new fr(hr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=As(t);s<u.length;s++){var a=u[s];if(a.field.W())o.push(Ji(e,r.key));else{var c=r.field(a.field);if(xi(c))throw new fr(hr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.B();throw new fr(hr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new zs(o,i)}(this.Sf,this.firestore.l_,t,e.pf,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new fr(hr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.W()){if("string"!=typeof c)throw new fr(hr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ts(t)&&-1!==c.indexOf("/"))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(jr.q(c));if(!Br.X(h))throw new fr(hr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new Br(h);u.push(Ji(e,f))}else{var l=_f(n,r,c);u.push(l)}}return new zs(u,o)}(this.Sf,this.firestore.l_,this.firestore.wf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},u=0;if("object"!=typeof i[u]||Cf(i[u])||(s=i[u],u++),Cf(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}var c={next:function(t){i[u]&&i[u](new tl(r.firestore,r.Sf,t,r.f_))},error:i[u+1],complete:i[u+2]};return Qf(this.Sf),this.firestore.uf().listen(this.Sf,s,c)},t.prototype.get=function(t){var e=this;Qf(this.Sf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.K_(this.Sf):n.Q_(this.Sf,t)).then((function(t){return new tl(e.firestore,e.Sf,t,e.f_)}))},t}(),tl=function(){function t(t,e,n,r){this.Af=t,this.Cf=e,this.Nf=n,this.f_=r,this.xf=null,this.Ff=null,this.metadata=new Hf(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Nf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Nf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Nf.docs.forEach((function(r){t.call(e,n.kf(r,n.metadata.fromCache,n.Nf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new $f(this.Cf,this.Af,this.f_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=!(!t||!t.includeMetadataChanges);if(e&&this.Nf.jt)throw new fr(hr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.xf&&this.Ff===e||(this.xf=function(t,e,n){if(t.Kt.P()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Kt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:rl(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.Nf,e,this.kf.bind(this)),this.Ff=e),this.xf},t.prototype.isEqual=function(e){return e instanceof t&&this.Af===e.Af&&ks(this.Cf,e.Cf)&&this.Nf.isEqual(e.Nf)&&this.f_===e.f_},t.prototype.kf=function(t,e,n){return new Wf(this.Af,t.key,t,e,n,this.f_)},t}(),el=function(t){function e(e,n,r){var i=this;if((i=t.call(this,bs(e),n,r)||this).Of=e,e.length%2!=1)throw new fr(hr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.B()+" has "+e.length);return i}return(0,r.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Sf.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Sf.path.F();return t.P()?null:new Jf(new Br(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Sf.path.B()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Er.t()),Xh("CollectionReference.doc","path",t);var e=jr.q(t);return Jf.mf(this.Sf.path.child(e),this.firestore,this.f_)},e.prototype.add=function(t){var e=this.f_?this.f_.toFirestore(t):t,n=this.doc();return new Jf(n.__,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Of,this.firestore,t)},e}($f);function nl(t,e,n){var r=function(t,e){if(!(t instanceof e)){if(e.name===t.constructor.name)throw new fr(hr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qh(t);throw new fr(hr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}(e,Jf);if(r.firestore!==n)throw new fr(hr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function rl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mr()}}function il(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ol,sl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,r.ZT)(e,t),e.serverTimestamp=function(){var t=new uf("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new of("deleteField");return t.t_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new af("arrayUnion",t)}.apply(void 0,t);return r.t_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cf("arrayRemove",t)}.apply(void 0,t);return r.t_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new hf("increment",t)}(t);return n.t_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.u_.isEqual(t.u_)},e}(lf),ul={Firestore:qf,GeoPoint:ff,Timestamp:Mr,Blob:kr,Transaction:Bf,WriteBatch:zf,DocumentReference:Jf,DocumentSnapshot:Kf,Query:$f,QueryDocumentSnapshot:Wf,QuerySnapshot:tl,CollectionReference:el,FieldPath:ef,FieldValue:sl,setLogLevel:function(t){var e;e=t,lr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:Mf};(function(t,e){t.INTERNAL.registerComponent(new cr.wA("firestore",(function(t){return function(t,e){return new qf(t,e,new Ff)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ul)))})(ol=i.Z),ol.registerVersion("@firebase/firestore","2.0.0")}}]);